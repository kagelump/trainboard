(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(i){if(i.ep)return;i.ep=!0;const n=o(i);fetch(i.href,n)}})();async function j(e,t=3,o=1e3){for(let a=0;a<t;a++)try{const i=await fetch(e);if(!i.ok)throw new Error(`HTTP ${i.status}`);return i}catch(i){if(a===t-1)throw i;await new Promise(n=>setTimeout(n,o*2**a))}throw new Error("Unreachable")}async function De(e,t,o,a){if(!t||!o||!e||!a)throw new Error("API key, base URL, station URI, and railway URI are required");const i=(()=>{const l=new Date().getDay();return l>=1&&l<=5?"odpt.Calendar:Weekday":"odpt.Calendar:SaturdayHoliday"})(),n=new URLSearchParams({"acl:consumerKey":String(t),"odpt:railway":a,"odpt:station":e,"odpt:calendar":i}),s=`${o}odpt:StationTimetable?${n.toString()}`;return await(await j(s)).json()}async function Lt(e,t,o){if(!e||!t||!o)throw new Error("API key, base URL, and railway URI are required");const a=new URLSearchParams({"acl:consumerKey":String(e),"odpt:railway":o}),i=`${t}odpt:TrainInformation?${a.toString()}`;return await(await j(i)).json()}async function Be(e,t,o){if(!t||!o)throw new Error("API key and base URL are required");if(e.length===0)return[];const a=new URLSearchParams({"acl:consumerKey":String(t)});a.append("owl:sameAs",e.join(","));const i=`${o}odpt:Station?${a.toString()}`;return await(await j(i)).json()}async function je(e,t){if(!e||!t)throw new Error("API key and base URL are required");const o=new URLSearchParams({"acl:consumerKey":String(e)}),a=`${t}odpt:Railway?${o.toString()}`;return await(await j(a)).json()}async function ze(e,t,o){if(!t||!o||!e)throw new Error("API key, base URL, and railway URI are required");const a=new URLSearchParams({"acl:consumerKey":String(t)});a.append("owl:sameAs",e);const i=`${o}odpt:Railway?${a.toString()}`,s=await(await j(i)).json();return s.length>0?s[0]:null}async function Ye(e,t){if(!e||!t)throw new Error("API key and base URL are required");const o=new URLSearchParams({"acl:consumerKey":String(e)}),a=`${t}odpt:RailDirection?${o.toString()}`;return await(await j(a)).json()}async function Fe(e,t){if(!e||!t)throw new Error("API key and base URL are required");const o=new URLSearchParams({"acl:consumerKey":String(e)}),a=`${t}odpt:TrainType?${o.toString()}`;return await(await j(a)).json()}function q(e){if(!e)return"N/A";if(typeof e=="string")return e;const t=e;return t.ja||t.en||"N/A"}function me(e){const[t,o]=e.split(":").map(a=>Number(a));return t*60+o}function Gt(e,t,o,a=5){return(e.find(s=>s["odpt:railDirection"]===t)?.["odpt:stationTimetableObject"]??[]).filter(s=>typeof s["odpt:departureTime"]=="string").filter(s=>me(s["odpt:departureTime"])>=o).slice(0,a)}function We(...e){const t=new Set;for(const o of e)for(const a of o??[]){const i=a["odpt:destinationStation"];if(i)if(Array.isArray(i)){for(const n of i)if(n){if(typeof n=="string")t.add(n);else if(typeof n=="object"){const s=n["owl:sameAs"]||n["@id"]||n.id;s&&typeof s=="string"&&t.add(s)}}}else typeof i=="string"&&t.add(i)}return t}function fe(e=new Date){return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}function Te(e){return document.getElementById(e)}const qe="modulepreload",Ge=function(e,t){return new URL(e,t).href},Vt={},Ve=function(t,o,a){let i=Promise.resolve();if(o&&o.length>0){let d=function(y){return Promise.all(y.map(u=>Promise.resolve(u).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};const s=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),l=r?.nonce||r?.getAttribute("nonce");i=d(o.map(y=>{if(y=Ge(y,a),y in Vt)return;Vt[y]=!0;const u=y.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(a)for(let h=s.length-1;h>=0;h--){const R=s[h];if(R.href===y&&(!u||R.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${y}"]${c}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":qe,u||(p.as="script"),p.crossOrigin="",p.href=y,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((h,R)=>{p.addEventListener("load",h),p.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${y}`)))})}))}function n(s){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s}return i.then(s=>{for(const r of s||[])r.status==="rejected"&&n(r.reason);return t().catch(n)})};class Ze{constructor(t=500,o,a){if(this.maxEntries=t,this.ttlMs=o,this.persistKeyName=a,this.map=new Map,a&&typeof localStorage<"u")try{const i=localStorage.getItem(a);if(i){const n=JSON.parse(i);for(const s of Object.keys(n)){const r=n[s];(!r.expires||r.expires>Date.now())&&this.map.set(s,r)}}}catch(i){console.warn(`Failed to restore cache from localStorage key "${a}":`,i)}}get(t){const o=this.map.get(t);if(o){if(o.expires&&o.expires<=Date.now()){this.map.delete(t);return}return this.map.delete(t),this.map.set(t,o),o.v}}set(t,o){const a=this.ttlMs?Date.now()+this.ttlMs:void 0;for(this.map.has(t)&&this.map.delete(t),this.map.set(t,{v:o,expires:a});this.map.size>this.maxEntries;){const i=this.map.keys().next().value;this.map.delete(i)}this.persistKeyName&&this.persist()}has(t){return typeof this.get(t)<"u"}persist(){if(this.persistKeyName)try{const t={};for(const[o,a]of this.map.entries())t[o]=a;localStorage.setItem(this.persistKeyName,JSON.stringify(t))}catch(t){console.warn(`Failed to persist cache to localStorage key "${this.persistKeyName}":`,t)}}keys(){return Array.from(this.map.keys())}enablePersistence(t){this.persistKeyName=t,this.persist()}}const ge={"odpt.TrainType:Sotetsu.CommuterExpress":{outline:"black",text:"red",fill:"black"},"odpt.TrainType:Sotetsu.CommuterLimitedExpress":{outline:"black",text:"red",fill:"white"},"odpt.TrainType:Sotetsu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Sotetsu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Sotetsu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Sotetsu.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:Odakyu.CommuterExpress":{outline:"black",text:"red",fill:"black"},"odpt.TrainType:Odakyu.CommuterSemiExpress":{outline:"black",text:"yellow",fill:"black"},"odpt.TrainType:Odakyu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Odakyu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Odakyu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Odakyu.RapidExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Odakyu.SemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Keikyu.AccessExpress":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Keikyu.AirportRapidLimitedExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Keikyu.CommuterLimitedExpress":{outline:"black",text:"red",fill:"white"},"odpt.TrainType:Keikyu.EveningWing":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Keikyu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Keikyu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Keikyu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Keikyu.MorningWing":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Keikyu.RapidLimitedExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Keikyu.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:Seibu.CommuterExpress":{outline:"black",text:"red",fill:"black"},"odpt.TrainType:Seibu.CommuterSemiExpress":{outline:"black",text:"yellow",fill:"black"},"odpt.TrainType:Seibu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Seibu.F-Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Seibu.HaijimaLiner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Seibu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Seibu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Seibu.RapidExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Seibu.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:Seibu.S-TRAIN":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Seibu.SemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Tokyu.CommuterLimitedExpress":{outline:"yellow",text:"red",fill:"white"},"odpt.TrainType:Tokyu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Tokyu.F-Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tokyu.LimitedExpress":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tokyu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Tokyu.S-TRAIN":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tokyu.SemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Tobu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Tobu.F-Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tobu.KawagoeLimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Tobu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Tobu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Tobu.RapidExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Tobu.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:Tobu.SL-Taiju":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tobu.SectionExpress":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Tobu.SectionSemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Tobu.SemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Tobu.TH-LINER":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tobu.TJ-Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:JR-East.ChuoSpecialRapid":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:JR-East.CommuterRapid":{outline:"black",text:"red",fill:"black"},"odpt.TrainType:JR-East.CommuterSpecialRapid":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:JR-East.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:JR-East.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:JR-East.Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:JR-East.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:JR-East.OmeSpecialRapid":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:JR-East.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:JR-East.SpecialRapid":{outline:"black",text:"yellow",fill:"red"}};let Nt=null;function Qe(){if(document.getElementById("train-type-dynamic-styles"))return;const e=document.createElement("style");e.id="train-type-dynamic-styles";let t="";for(const[o,a]of Object.entries(ge)){const i=Ee(o);t+=`
.${i} {
  background-color: ${a.fill};
  color: ${a.text};
  border: 2px solid ${a.outline};
}
`}if(e.textContent=t,document.head.appendChild(e),"CSSStyleSheet"in window&&typeof CSSStyleSheet.prototype.replaceSync=="function")try{Nt=new CSSStyleSheet,Nt.replaceSync(t)}catch(o){console.warn("Failed to create constructable stylesheet:",o)}}function Xe(){return Nt}function Ee(e){return"train-type-"+e.replace(/[:.]/g,"-")}function to(e){return e in ge?Ee(e):"type-LOC"}const eo={"odpt.Railway:Odakyu.Odawara":{inbound:"新宿",outbound:"小田原"},"odpt.Railway:Keikyu.Main":{inbound:"品川",outbound:"浦賀"},"odpt.Railway:Tobu.Nikko":{inbound:"浅草",outbound:"東武日光"},"odpt.Railway:Tobu.TobuSkytree":{inbound:"浅草",outbound:"東武動物公園"},"odpt.Railway:JR-East.ChuoSobuLocal":{inbound:"三鷹",outbound:"千葉"},"odpt.Railway:Fujikyu.Fujikyu":{inbound:"大月",outbound:"河口湖"},"odpt.Railway:Keikyu.Airport":{inbound:"品川",outbound:"羽田空港"},"odpt.Railway:Keikyu.Daishi":{inbound:"京急川崎",outbound:"小島新田"},"odpt.Railway:Tokyu.DenEnToshi":{inbound:"渋谷",outbound:"中央林間"},"odpt.Railway:Tokyu.Ikegami":{inbound:"五反田",outbound:"蒲田"},"odpt.Railway:Tobu.Daishi":{inbound:"西新井",outbound:"大師前"},"odpt.Railway:Tobu.Isesaki":{inbound:"東武動物公園",outbound:"伊勢崎"},"odpt.Railway:Tobu.Kiryu":{inbound:"太田",outbound:"赤城"},"odpt.Railway:ChibaMonorail.Line2":{inbound:"千葉",outbound:"千城台"},"odpt.Railway:JR-East.Chuo":{inbound:"東京",outbound:"高尾"},"odpt.Railway:JR-East.Joban":{inbound:"上野",outbound:"水戸"},"odpt.Railway:Seibu.Toshima":{inbound:"練馬",outbound:"豊島園"},"odpt.Railway:Sotetsu.Izumino":{inbound:"二俣川",outbound:"湘南台"},"odpt.Railway:Sotetsu.Main":{inbound:"横浜",outbound:"海老名"},"odpt.Railway:Sotetsu.SotetsuShinYokohama":{inbound:"新横浜",outbound:"西谷"},"odpt.Railway:JR-Central.TokaidoShinkansen":{inbound:"東京",outbound:"新大阪"},"odpt.Railway:Odakyu.Enoshima":{inbound:"相模大野",outbound:"片瀬江ノ島"},"odpt.Railway:Odakyu.Tama":{inbound:"新百合ヶ丘",outbound:"唐木田"},"odpt.Railway:Keikyu.Kurihama":{inbound:"堀ノ内",outbound:"三崎口"},"odpt.Railway:Tokyu.Setagaya":{inbound:"三軒茶屋",outbound:"下高井戸"},"odpt.Railway:Keikyu.Zushi":{inbound:"金沢八景",outbound:"逗子・葉山"},"odpt.Railway:Seibu.Haijima":{inbound:"西武新宿",outbound:"拝島"},"odpt.Railway:Seibu.Ikebukuro":{inbound:"池袋",outbound:"飯能"},"odpt.Railway:Chichibu.Chichibu":{inbound:"羽生",outbound:"三峰口"},"odpt.Railway:Seibu.Kokubunji":{inbound:"国分寺",outbound:"東村山"},"odpt.Railway:Seibu.Sayama":{inbound:"西所沢",outbound:"西武球場前"},"odpt.Railway:Isumi.Isumi":{inbound:"大原",outbound:"上総中野"},"odpt.Railway:Seibu.SeibuChichibu":{inbound:"吾野",outbound:"西武秩父"},"odpt.Railway:Seibu.SeibuYurakucho":{inbound:"練馬",outbound:"小竹向原"},"odpt.Railway:Seibu.Seibuen":{inbound:"東村山",outbound:"西武園"},"odpt.Railway:Seibu.Shinjuku":{inbound:"西武新宿",outbound:"本川越"},"odpt.Railway:Seibu.Tamagawa":{inbound:"武蔵境",outbound:"是政"},"odpt.Railway:Seibu.Tamako":{inbound:"国分寺",outbound:"西武遊園地"},"odpt.Railway:Seibu.Yamaguchi":{inbound:"西武球場前",outbound:"西武遊園地"},"odpt.Railway:Tokyu.Kodomonokuni":{inbound:"長津田",outbound:"こどもの国"},"odpt.Railway:Tokyu.Meguro":{inbound:"目黒",outbound:"日吉"},"odpt.Railway:Tokyu.Oimachi":{inbound:"大井町",outbound:"溝の口"},"odpt.Railway:Tokyu.TokyuShinYokohama":{inbound:"新横浜",outbound:"西谷"},"odpt.Railway:JR-Central.Gotemba":{inbound:"国府津",outbound:"沼津"},"odpt.Railway:JR-Central.Minobu":{inbound:"富士",outbound:"甲府"},"odpt.Railway:Tokyu.TokyuTamagawa":{inbound:"多摩川",outbound:"蒲田"},"odpt.Railway:Choshi.Choshi":{inbound:"銚子",outbound:"外川"},"odpt.Railway:Tokyu.Toyoko":{inbound:"渋谷",outbound:"横浜"},"odpt.Railway:Tobu.Kameido":{inbound:"曳舟",outbound:"亀戸"},"odpt.Railway:Tobu.Kinugawa":{inbound:"下今市",outbound:"新藤原"},"odpt.Railway:IzuHakone.Sunzu":{inbound:"三島",outbound:"修善寺"},"odpt.Railway:Tobu.KoizumiBranch":{inbound:"館林",outbound:"西小泉"},"odpt.Railway:Tobu.Koizumi":{inbound:"太田",outbound:"西小泉"},"odpt.Railway:Enoden.Enoden":{inbound:"鎌倉",outbound:"藤沢"},"odpt.Railway:Tobu.Ogose":{inbound:"坂戸",outbound:"越生"},"odpt.Railway:Tobu.Sano":{inbound:"館林",outbound:"葛生"},"odpt.Railway:Izukyu.Izukyu":{inbound:"伊東",outbound:"伊豆急下田"},"odpt.Railway:JR-Central.Chuo":{inbound:"名古屋",outbound:"中津川"},"odpt.Railway:Tobu.TobuSkytreeBranch":{inbound:"曳舟",outbound:"亀戸"},"odpt.Railway:Tobu.TobuUrbanPark":{inbound:"大宮",outbound:"船橋"},"odpt.Railway:Tobu.Tojo":{inbound:"池袋",outbound:"寄居"},"odpt.Railway:Tobu.Utsunomiya":{inbound:"新栃木",outbound:"東武宇都宮"},"odpt.Railway:Aizu.Aizu":{inbound:"西若松",outbound:"会津高原"},"odpt.Railway:ChibaMonorail.Line1":{inbound:"千葉みなと",outbound:"県庁前"},"odpt.Railway:Hitachinaka.Minato":{inbound:"勝田",outbound:"阿字ヶ浦"},"odpt.Railway:Hokuetsu.Hokuhoku":{inbound:"六日町",outbound:"犀潟"},"odpt.Railway:Hokuso.Hokuso":{inbound:"京成高砂",outbound:"印旛日本医大"},"odpt.Railway:IzuHakone.Daiyuzan":{inbound:"小田原",outbound:"大雄山"},"odpt.Railway:JR-Central.Tokaido":{inbound:"東京",outbound:"熱海"},"odpt.Railway:JR-East.AkitaShinkansen":{inbound:"東京",outbound:"秋田"},"odpt.Railway:JR-East.Aterazawa":{inbound:"山形",outbound:"左沢"},"odpt.Railway:JR-East.BanetsuEast":{inbound:"郡山",outbound:"いわき"},"odpt.Railway:JR-East.BanetsuWest":{inbound:"郡山",outbound:"新潟"},"odpt.Railway:JR-East.Kitakami":{inbound:"北上",outbound:"横手"},"odpt.Railway:JR-East.ChuoTatsunoBranch":{inbound:"岡谷",outbound:"辰野"},"odpt.Railway:JR-East.Echigo":{inbound:"新潟",outbound:"柏崎"},"odpt.Railway:JR-East.Gono":{inbound:"東能代",outbound:"川部"},"odpt.Railway:JR-East.Hachinohe":{inbound:"八戸",outbound:"久慈"},"odpt.Railway:JR-East.Hakushin":{inbound:"新潟",outbound:"新発田"},"odpt.Railway:JR-East.Hanawa":{inbound:"大館",outbound:"好摩"},"odpt.Railway:JR-East.HokurikuShinkansen":{inbound:"東京",outbound:"金沢"},"odpt.Railway:JR-East.Iiyama":{inbound:"豊野",outbound:"越後川口"},"odpt.Railway:JR-East.Ishinomaki":{inbound:"小牛田",outbound:"女川"},"odpt.Railway:JR-East.JoetsuShinkansen":{inbound:"東京",outbound:"新潟"},"odpt.Railway:JR-East.Kamaishi":{inbound:"花巻",outbound:"釜石"},"odpt.Railway:JR-East.Karasuyama":{inbound:"宝積寺",outbound:"烏山"},"odpt.Railway:JR-East.Kesennuma":{inbound:"前谷地",outbound:"気仙沼"},"odpt.Railway:JR-East.Koumi":{inbound:"小淵沢",outbound:"小諸"},"odpt.Railway:JR-East.Mito":{inbound:"小山",outbound:"水戸"},"odpt.Railway:JR-East.Nikko":{inbound:"宇都宮",outbound:"日光"},"odpt.Railway:JR-East.Ofunato":{inbound:"一ノ関",outbound:"盛"},"odpt.Railway:JR-East.Oga":{inbound:"追分",outbound:"男鹿"},"odpt.Railway:JR-East.Oito":{inbound:"松本",outbound:"南小谷"},"odpt.Railway:JR-East.Ominato":{inbound:"野辺地",outbound:"大湊"},"odpt.Railway:JR-East.OuYamagata":{inbound:"福島",outbound:"新庄"},"odpt.Railway:JR-East.Ou":{inbound:"福島",outbound:"青森"},"odpt.Railway:JR-East.RikuEast":{inbound:"小牛田",outbound:"新庄"},"odpt.Railway:JR-East.RikuWest":{inbound:"新庄",outbound:"余目"},"odpt.Railway:JR-East.Ryomo":{inbound:"小山",outbound:"新前橋"},"odpt.Railway:JR-East.SensekiTohoku":{inbound:"仙台",outbound:"石巻"},"odpt.Railway:JR-East.Senseki":{inbound:"仙台",outbound:"石巻"},"odpt.Railway:JR-East.Senzan":{inbound:"仙台",outbound:"羽前千歳"},"odpt.Railway:JR-East.Shinetsu":{inbound:"高崎",outbound:"新潟"},"odpt.Railway:JR-East.Shinonoi":{inbound:"塩尻",outbound:"篠ノ井"},"odpt.Railway:JR-East.SuigunBranch":{inbound:"郡山",outbound:"水戸"},"odpt.Railway:JR-East.Suigun":{inbound:"水戸",outbound:"郡山"},"odpt.Railway:JR-East.Tadami":{inbound:"会津若松",outbound:"小出"},"odpt.Railway:JR-East.Tazawako":{inbound:"盛岡",outbound:"大曲"},"odpt.Railway:JR-East.TohokuShinkansen":{inbound:"東京",outbound:"新青森"},"odpt.Railway:JR-East.Tohoku":{inbound:"東京",outbound:"一ノ関"},"odpt.Railway:JR-East.Tsugaru":{inbound:"青森",outbound:"三厩"},"odpt.Railway:JR-East.Uetsu":{inbound:"新津",outbound:"秋田"},"odpt.Railway:JR-East.Yahiko":{inbound:"東三条",outbound:"弥彦"},"odpt.Railway:JR-East.Yamada":{inbound:"盛岡",outbound:"宮古"},"odpt.Railway:JR-East.YamagataShinkansen":{inbound:"東京",outbound:"新庄"},"odpt.Railway:JR-East.Yonesaka":{inbound:"米沢",outbound:"坂町"},"odpt.Railway:JR-Shikoku.SetoOhashi":{inbound:"岡山",outbound:"高松"},"odpt.Railway:JR-West.Sanin":{inbound:"京都",outbound:"幡生"},"odpt.Railway:Jomo.Jomo":{inbound:"高崎",outbound:"西桐生"},"odpt.Railway:Joshin.Joshin":{inbound:"高崎",outbound:"下仁田"},"odpt.Railway:KantoRailway.Ryugasaki":{inbound:"佐貫",outbound:"竜ヶ崎"},"odpt.Railway:KashimaRinkai.OaraiKashima":{inbound:"水戸",outbound:"鹿島神宮"},"odpt.Railway:Keisei.Chiba":{inbound:"京成津田沼",outbound:"千葉中央"},"odpt.Railway:Keisei.HigashiNarita":{inbound:"京成成田",outbound:"東成田"},"odpt.Railway:Keisei.Kanamachi":{inbound:"京成高砂",outbound:"金町"},"odpt.Railway:Keisei.Main":{inbound:"京成上野",outbound:"成田空港"},"odpt.Railway:Keisei.NaritaSkyAccess":{inbound:"京成上野",outbound:"成田空港"},"odpt.Railway:Keisei.Oshiage":{inbound:"押上",outbound:"京成高砂"},"odpt.Railway:Kominato.Kominato":{inbound:"五井",outbound:"上総中野"},"odpt.Railway:TokyoMetro.Hanzomon":{inbound:"渋谷",outbound:"押上"},"odpt.Railway:MIR.TsukubaExpress":{inbound:"秋葉原",outbound:"つくば"},"odpt.Railway:MaihamaResort.DisneyResort":{inbound:"リゾートゲートウェイ",outbound:"東京ディズニーランド"},"odpt.Railway:Minatomirai.Minatomirai":{inbound:"横浜",outbound:"元町・中華街"},"odpt.Railway:OdakyuHakone.HakoneTozan":{inbound:"小田原",outbound:"強羅"},"odpt.Railway:Ryutetsu.Nagareyama":{inbound:"馬橋",outbound:"流山"},"odpt.Railway:SaitamaRailway.SaitamaRailway":{inbound:"赤羽岩淵",outbound:"浦和美園"},"odpt.Railway:SaitamaTransit.NewShuttle":{inbound:"大宮",outbound:"内宿"},"odpt.Railway:SendaiAirportTransit.SendaiAirport":{inbound:"仙台",outbound:"仙台空港"},"odpt.Railway:SendaiMunicipal.Namboku":{inbound:"泉中央",outbound:"富沢"},"odpt.Railway:SendaiMunicipal.Tozai":{inbound:"八木山動物公園",outbound:"荒井"},"odpt.Railway:Shibayama.Shibayama":{inbound:"東成田",outbound:"芝山千代田"},"odpt.Railway:ShinKeisei.ShinKeisei":{inbound:"松戸",outbound:"京成津田沼"},"odpt.Railway:ShonanMonorail.ShonanMonorail":{inbound:"大船",outbound:"湘南江の島"},"odpt.Railway:TWR.Rinkai":{inbound:"大崎",outbound:"新木場"},"odpt.Railway:TamaMonorail.TamaMonorail":{inbound:"上北台",outbound:"多摩センター"},"odpt.Railway:Toei.Arakawa":{inbound:"早稲田",outbound:"三ノ輪橋"},"odpt.Railway:Toei.Asakusa":{inbound:"西馬込",outbound:"押上"},"odpt.Railway:Toei.Mita":{inbound:"目黒",outbound:"西高島平"},"odpt.Railway:Toei.NipporiToneri":{inbound:"日暮里",outbound:"見沼代親水公園"},"odpt.Railway:Toei.Oedo":{inbound:"光が丘",outbound:"大門"},"odpt.Railway:Toei.Shinjuku":{inbound:"新宿",outbound:"本八幡"},"odpt.Railway:TokyoMetro.Chiyoda":{inbound:"代々木上原",outbound:"取手"},"odpt.Railway:TokyoMetro.Fukutoshin":{inbound:"渋谷",outbound:"和光市"},"odpt.Railway:TokyoMetro.Ginza":{inbound:"渋谷",outbound:"浅草"},"odpt.Railway:TokyoMetro.Hibiya":{inbound:"中目黒",outbound:"北千住"},"odpt.Railway:TokyoMetro.Marunouchi":{inbound:"荻窪",outbound:"池袋"},"odpt.Railway:TokyoMetro.Namboku":{inbound:"目黒",outbound:"赤羽岩淵"},"odpt.Railway:TokyoMetro.Tozai":{inbound:"中野",outbound:"西船橋"},"odpt.Railway:TokyoMetro.Yurakucho":{inbound:"新木場",outbound:"和光市"},"odpt.Railway:TokyoMonorail.HanedaAirport":{inbound:"浜松町",outbound:"羽田空港"},"odpt.Railway:UtsunomiyaLightRail.UtsunomiyaLightRail":{inbound:"宇都宮駅東口",outbound:"芳賀・高根沢工業団地"},"odpt.Railway:WataraseKeikoku.WataraseKeikoku":{inbound:"桐生",outbound:"間藤"},"odpt.Railway:Yagan.AizuKinugawa":{inbound:"新藤原",outbound:"会津高原"},"odpt.Railway:YokohamaMunicipal.Blue":{inbound:"湘南台",outbound:"あざみ野"},"odpt.Railway:YokohamaMunicipal.Green":{inbound:"中山",outbound:"日吉"},"odpt.Railway:YokohamaSeaside.KanazawaSeaside":{inbound:"新杉田",outbound:"金沢八景"},"odpt.Railway:Yurikamome.Yurikamome":{inbound:"新橋",outbound:"豊洲"},"odpt.Railway:Keio.Inokashira":{inbound:"渋谷",outbound:"吉祥寺"},"odpt.Railway:Keio.KeioNew":{inbound:"新宿",outbound:"笹塚"},"odpt.Railway:Keio.Keio":{inbound:"新宿",outbound:"京王八王子"},"odpt.Railway:Keio.Sagamihara":{inbound:"調布",outbound:"橋本"},"odpt.Railway:KantoRailway.Joso":{inbound:"取手",outbound:"下館"},"odpt.Railway:Keio.Takao":{inbound:"北野",outbound:"高尾山口"},"odpt.Railway:ToyoRapid.ToyoRapid":{inbound:"西船橋",outbound:"東葉勝田台"},"odpt.Railway:JR-East.Agatsuma":{inbound:"渋川",outbound:"大前"},"odpt.Railway:JR-East.ChuoRapid":{inbound:"東京",outbound:"高尾"},"odpt.Railway:JR-East.Hachiko":{inbound:"八王子",outbound:"高崎"},"odpt.Railway:JR-East.Ito":{inbound:"熱海",outbound:"伊東"},"odpt.Railway:JR-East.Kawagoe":{inbound:"大宮",outbound:"高麗川"},"odpt.Railway:JR-East.Itsukaichi":{inbound:"拝島",outbound:"武蔵五日市"},"odpt.Railway:JR-East.JobanLocal":{inbound:"代々木上原",outbound:"取手"},"odpt.Railway:JR-East.JobanRapid":{inbound:"上野",outbound:"取手"},"odpt.Railway:JR-East.Joetsu":{inbound:"高崎",outbound:"長岡"},"odpt.Railway:JR-East.Kashima":{inbound:"香取",outbound:"鹿島神宮"},"odpt.Railway:JR-East.KeihinTohokuNegishi":{inbound:"大宮",outbound:"大船"},"odpt.Railway:JR-East.Keiyo":{inbound:"東京",outbound:"蘇我"},"odpt.Railway:JR-East.Kururi":{inbound:"木更津",outbound:"上総亀山"},"odpt.Railway:JR-East.Narita":{inbound:"佐倉",outbound:"銚子"},"odpt.Railway:JR-East.Musashino":{inbound:"府中本町",outbound:"西船橋"},"odpt.Railway:JR-East.NambuBranch":{inbound:"尻手",outbound:"浜川崎"},"odpt.Railway:JR-East.Nambu":{inbound:"川崎",outbound:"立川"},"odpt.Railway:JR-East.NaritaAbikoBranch":{inbound:"我孫子",outbound:"成田"},"odpt.Railway:JR-East.NaritaAirportBranch":{inbound:"成田",outbound:"成田空港"},"odpt.Railway:JR-East.Ome":{inbound:"立川",outbound:"奥多摩"},"odpt.Railway:JR-East.Sagami":{inbound:"茅ヶ崎",outbound:"橋本"},"odpt.Railway:JR-East.SaikyoKawagoe":{inbound:"大崎",outbound:"川越"},"odpt.Railway:JR-East.ShonanShinjuku":{inbound:"大宮",outbound:"大船"},"odpt.Railway:JR-East.SobuRapid":{inbound:"東京",outbound:"千葉"},"odpt.Railway:JR-East.Sobu":{inbound:"千葉",outbound:"銚子"},"odpt.Railway:JR-East.SotetsuDirect":{inbound:"新宿",outbound:"海老名"},"odpt.Railway:JR-East.Sotobo":{inbound:"千葉",outbound:"安房鴨川"},"odpt.Railway:JR-East.Takasaki":{inbound:"上野",outbound:"高崎"},"odpt.Railway:JR-East.Togane":{inbound:"成東",outbound:"大網"},"odpt.Railway:JR-East.Tokaido":{inbound:"東京",outbound:"熱海"},"odpt.Railway:JR-East.TsurumiOkawaBranch":{inbound:"浅野",outbound:"大川"},"odpt.Railway:JR-East.TsurumiUmiShibauraBranch":{inbound:"浅野",outbound:"海芝浦"},"odpt.Railway:JR-East.Tsurumi":{inbound:"鶴見",outbound:"扇町"},"odpt.Railway:JR-East.Uchibo":{inbound:"蘇我",outbound:"安房鴨川"},"odpt.Railway:JR-East.Utsunomiya":{inbound:"上野",outbound:"黒磯"},"odpt.Railway:JR-East.Yamanote":{inbound:"内回り",outbound:"外回り"},"odpt.Railway:JR-East.Yokohama":{inbound:"東神奈川",outbound:"八王子"},"odpt.Railway:JR-East.Yokosuka":{inbound:"東京",outbound:"久里浜"}};let ke=[],K=null,ot=null,at=null,Ot="渋谷・副都心線方面",Kt="横浜・元町中華街方面";const F=eo,st={},it=new Map;let Se=[];const N=new Ze(500);function oo(){return ot||"odpt.RailDirection:Inbound"}function ao(){return at||"odpt.RailDirection:Outbound"}function io(){try{const e=K?K["owl:sameAs"]||K["@id"]:null;if(e&&F[e]&&F[e].inbound)return F[e].inbound}catch{}return Ot}function no(){try{const e=K?K["owl:sameAs"]||K["@id"]:null;if(e&&F[e]&&F[e].outbound)return F[e].outbound}catch{}return Kt}function Ut(){return ke}function so(e){ke=e}function J(){return Se}async function ro(e,t){try{const o=await Ye(e,t);for(const a of o){const i=a["owl:sameAs"]||a["@id"],n=q(a["dc:title"]);i&&typeof i=="string"&&it.set(i,n)}}catch(o){console.warn("Failed to load direction names:",o)}}async function lo(e,t){try{const o=await Fe(e,t);for(const a of o){const i=a["owl:sameAs"]||a["@id"];if(!i||typeof i!="string")continue;const n=q(a["dc:title"]);if(!n)continue;const s=to(i);st[i]={name:n,class:s}}console.log(`Loaded ${Object.keys(st).length} train types`)}catch(o){console.warn("Failed to load train types:",o)}}async function pt(e,t,o){try{const a=await ze(e,t,o);if(!a){console.warn("Railway not found:",e);return}K=a,ot=a["odpt:descendingRailDirection"]||"odpt.RailDirection:Inbound",at=a["odpt:ascendingRailDirection"]||"odpt.RailDirection:Outbound",ot&&it.has(ot)&&(Ot=it.get(ot)||Ot),at&&it.has(at)&&(Kt=it.get(at)||Kt),Se=(a["odpt:stationOrder"]||[]).map(s=>{const r=s["odpt:station"]||"",l=s["odpt:stationTitle"],d=q(l),y=s["odpt:index"]||-1;return{name:d,uri:r,index:y}}).filter(s=>s.uri&&s.name!=="N/A").sort((s,r)=>s.index-r.index);const n=q(a["dc:title"]||a["odpt:railwayTitle"]);Fa(`${n} 発車案内板`)}catch(a){console.warn("Failed to load railway metadata:",a)}}async function uo(e,t,...o){const a=We(...o),i=Array.from(a).filter(n=>!N.has(n));if(i.length!==0)try{const n=await Be(i,e,t);for(const s of n){const r=s["owl:sameAs"]||s["@id"]||s.id,l=q(s["dc:title"]||s["odpt:stationTitle"]||s.title);r&&typeof r=="string"&&N.set(r,l)}for(const s of i)N.has(s)||N.set(s,s)}catch(n){console.warn("Failed to fetch station names for destinations:",n)}}const St={東京都:["odpt.Railway:Odakyu.Odawara","odpt.Railway:Keikyu.Main","odpt.Railway:Tobu.TobuSkytree","odpt.Railway:JR-East.ChuoSobuLocal","odpt.Railway:Keikyu.Airport","odpt.Railway:Tokyu.DenEnToshi","odpt.Railway:Tokyu.Ikegami","odpt.Railway:Tobu.Daishi","odpt.Railway:JR-East.Chuo","odpt.Railway:JR-East.Joban","odpt.Railway:Seibu.Toshima","odpt.Railway:Odakyu.Tama","odpt.Railway:Tokyu.Setagaya","odpt.Railway:Seibu.Haijima","odpt.Railway:Seibu.Ikebukuro","odpt.Railway:Seibu.Kokubunji","odpt.Railway:Seibu.SeibuYurakucho","odpt.Railway:Seibu.Seibuen","odpt.Railway:Seibu.Shinjuku","odpt.Railway:Seibu.Tamagawa","odpt.Railway:Seibu.Tamako","odpt.Railway:Seibu.Yamaguchi","odpt.Railway:Tokyu.Kodomonokuni","odpt.Railway:Tokyu.Meguro","odpt.Railway:Tokyu.Oimachi","odpt.Railway:Tokyu.TokyuShinYokohama","odpt.Railway:Tokyu.TokyuTamagawa","odpt.Railway:Tokyu.Toyoko","odpt.Railway:Tobu.Kameido","odpt.Railway:Tobu.TobuSkytreeBranch","odpt.Railway:Hokuso.Hokuso","odpt.Railway:JR-East.HokurikuShinkansen","odpt.Railway:JR-East.JoetsuShinkansen","odpt.Railway:JR-East.TohokuShinkansen","odpt.Railway:JR-East.Ou","odpt.Railway:Keisei.Main","odpt.Railway:Keisei.NaritaSkyAccess","odpt.Railway:Keisei.Oshiage","odpt.Railway:TokyoMetro.Hanzomon","odpt.Railway:MIR.TsukubaExpress","odpt.Railway:TokyoMonorail.HanedaAirport","odpt.Railway:TWR.Rinkai","odpt.Railway:TamaMonorail.TamaMonorail","odpt.Railway:Toei.Arakawa","odpt.Railway:Toei.Asakusa","odpt.Railway:Toei.Mita","odpt.Railway:Toei.NipporiToneri","odpt.Railway:Toei.Oedo","odpt.Railway:Toei.Shinjuku","odpt.Railway:TokyoMetro.Chiyoda","odpt.Railway:TokyoMetro.Fukutoshin","odpt.Railway:TokyoMetro.Ginza","odpt.Railway:TokyoMetro.Hibiya","odpt.Railway:TokyoMetro.Marunouchi","odpt.Railway:TokyoMetro.Namboku","odpt.Railway:TokyoMetro.Tozai","odpt.Railway:TokyoMetro.Yurakucho","odpt.Railway:Yurikamome.Yurikamome","odpt.Railway:Keio.Inokashira","odpt.Railway:Keio.KeioNew","odpt.Railway:Keio.Keio","odpt.Railway:Keio.Sagamihara","odpt.Railway:Keio.Takao","odpt.Railway:JR-East.ChuoRapid","odpt.Railway:JR-East.Hachiko","odpt.Railway:JR-East.Kawagoe","odpt.Railway:JR-East.Itsukaichi","odpt.Railway:JR-East.JobanLocal","odpt.Railway:JR-East.JobanRapid","odpt.Railway:JR-East.KeihinTohokuNegishi","odpt.Railway:JR-East.Keiyo","odpt.Railway:JR-East.Musashino","odpt.Railway:JR-East.Nambu","odpt.Railway:JR-East.Ome","odpt.Railway:JR-East.SaikyoKawagoe","odpt.Railway:JR-East.ShonanShinjuku","odpt.Railway:JR-East.SobuRapid","odpt.Railway:JR-East.SotetsuDirect","odpt.Railway:JR-East.Tokaido","odpt.Railway:JR-East.Utsunomiya","odpt.Railway:JR-East.Yamanote","odpt.Railway:JR-East.Yokohama","odpt.Railway:JR-East.Yokosuka"],神奈川県:["odpt.Railway:Odakyu.Odawara","odpt.Railway:Keikyu.Main","odpt.Railway:Keikyu.Airport","odpt.Railway:Keikyu.Daishi","odpt.Railway:Tokyu.DenEnToshi","odpt.Railway:Tokyu.Ikegami","odpt.Railway:Sotetsu.Izumino","odpt.Railway:Sotetsu.Main","odpt.Railway:Sotetsu.SotetsuShinYokohama","odpt.Railway:JR-Central.TokaidoShinkansen","odpt.Railway:Odakyu.Enoshima","odpt.Railway:Odakyu.Tama","odpt.Railway:Keikyu.Kurihama","odpt.Railway:Keikyu.Zushi","odpt.Railway:Tokyu.Kodomonokuni","odpt.Railway:Tokyu.Meguro","odpt.Railway:Tokyu.Oimachi","odpt.Railway:Tokyu.TokyuShinYokohama","odpt.Railway:Tokyu.TokyuTamagawa","odpt.Railway:Choshi.Choshi","odpt.Railway:Tokyu.Toyoko","odpt.Railway:Enoden.Enoden","odpt.Railway:JR-Central.Tokaido","odpt.Railway:Minatomirai.Minatomirai","odpt.Railway:OdakyuHakone.HakoneTozan","odpt.Railway:ShonanMonorail.ShonanMonorail","odpt.Railway:JR-East.Tokaido","odpt.Railway:JR-East.KeihinTohokuNegishi","odpt.Railway:JR-East.NambuBranch","odpt.Railway:JR-East.Nambu","odpt.Railway:JR-East.Sagami","odpt.Railway:JR-East.ShonanShinjuku","odpt.Railway:JR-East.SotetsuDirect","odpt.Railway:JR-East.TsurumiOkawaBranch","odpt.Railway:JR-East.TsurumiUmiShibauraBranch","odpt.Railway:JR-East.Tsurumi","odpt.Railway:JR-East.Yokohama","odpt.Railway:JR-East.Yokosuka","odpt.Railway:YokohamaMunicipal.Blue","odpt.Railway:YokohamaMunicipal.Green","odpt.Railway:YokohamaSeaside.KanazawaSeaside"],千葉県:["odpt.Railway:JR-East.ChuoSobuLocal","odpt.Railway:ChibaMonorail.Line2","odpt.Railway:Tobu.TobuUrbanPark","odpt.Railway:Isumi.Isumi","odpt.Railway:Choshi.Choshi","odpt.Railway:Tobu.TobuUrbanPark","odpt.Railway:ChibaMonorail.Line1","odpt.Railway:Hokuso.Hokuso","odpt.Railway:Keisei.Chiba","odpt.Railway:Keisei.HigashiNarita","odpt.Railway:Keisei.Kanamachi","odpt.Railway:Keisei.Main","odpt.Railway:Keisei.NaritaSkyAccess","odpt.Railway:Keisei.Oshiage","odpt.Railway:Kominato.Kominato","odpt.Railway:MIR.TsukubaExpress","odpt.Railway:MaihamaResort.DisneyResort","odpt.Railway:Ryutetsu.Nagareyama","odpt.Railway:Shibayama.Shibayama","odpt.Railway:ShinKeisei.ShinKeisei","odpt.Railway:TWR.Rinkai","odpt.Railway:Toei.Shinjuku","odpt.Railway:TokyoMetro.Tozai","odpt.Railway:TokyoMetro.Yurakucho","odpt.Railway:ToyoRapid.ToyoRapid","odpt.Railway:JR-East.Keiyo","odpt.Railway:JR-East.Kashima","odpt.Railway:JR-East.Kururi","odpt.Railway:JR-East.Narita","odpt.Railway:JR-East.Musashino","odpt.Railway:JR-East.NaritaAbikoBranch","odpt.Railway:JR-East.NaritaAirportBranch","odpt.Railway:JR-East.SobuRapid","odpt.Railway:JR-East.Sobu","odpt.Railway:JR-East.Sotobo","odpt.Railway:JR-East.Togane","odpt.Railway:JR-East.Uchibo"],埼玉県:["odpt.Railway:Tobu.TobuSkytree","odpt.Railway:Tobu.Daishi","odpt.Railway:Tobu.TobuUrbanPark","odpt.Railway:Tobu.Tojo","odpt.Railway:Tobu.Ogose","odpt.Railway:Chichibu.Chichibu","odpt.Railway:Seibu.Haijima","odpt.Railway:Seibu.Ikebukuro","odpt.Railway:Seibu.Sayama","odpt.Railway:Seibu.SeibuChichibu","odpt.Railway:Seibu.SeibuYurakucho","odpt.Railway:MIR.TsukubaExpress","odpt.Railway:SaitamaRailway.SaitamaRailway","odpt.Railway:SaitamaTransit.NewShuttle","odpt.Railway:TokyoMetro.Fukutoshin","odpt.Railway:TokyoMetro.Namboku","odpt.Railway:TokyoMetro.Yurakucho","odpt.Railway:JR-East.Kawagoe","odpt.Railway:JR-East.Hachiko","odpt.Railway:JR-East.KeihinTohokuNegishi","odpt.Railway:JR-East.Musashino","odpt.Railway:JR-East.SaikyoKawagoe","odpt.Railway:JR-East.ShonanShinjuku","odpt.Railway:JR-East.Takasaki","odpt.Railway:JR-East.Utsunomiya"],群馬県:["odpt.Railway:Tobu.Kiryu","odpt.Railway:Tobu.Isesaki","odpt.Railway:Tobu.KoizumiBranch","odpt.Railway:Tobu.Koizumi","odpt.Railway:Jomo.Jomo","odpt.Railway:Joshin.Joshin","odpt.Railway:WataraseKeikoku.WataraseKeikoku","odpt.Railway:JR-East.Agatsuma","odpt.Railway:JR-East.Hachiko","odpt.Railway:JR-East.Joetsu","odpt.Railway:JR-East.Ryomo","odpt.Railway:JR-East.Takasaki"],栃木県:["odpt.Railway:Tobu.Nikko","odpt.Railway:Tobu.Kinugawa","odpt.Railway:Tobu.Sano","odpt.Railway:Tobu.Utsunomiya","odpt.Railway:Yagan.AizuKinugawa","odpt.Railway:JR-East.Nikko","odpt.Railway:JR-East.Ryomo","odpt.Railway:JR-East.Utsunomiya","odpt.Railway:JR-East.Karasuyama","odpt.Railway:JR-East.Mito","odpt.Railway:JR-East.Tohoku","odpt.Railway:UtsunomiyaLightRail.UtsunomiyaLightRail"],茨城県:["odpt.Railway:JR-East.Joban","odpt.Railway:JR-East.Mito","odpt.Railway:JR-East.SuigunBranch","odpt.Railway:JR-East.Suigun","odpt.Railway:Hitachinaka.Minato","odpt.Railway:KantoRailway.Ryugasaki","odpt.Railway:KantoRailway.Joso","odpt.Railway:KashimaRinkai.OaraiKashima","odpt.Railway:MIR.TsukubaExpress","odpt.Railway:TokyoMetro.Chiyoda","odpt.Railway:JR-East.JobanLocal","odpt.Railway:JR-East.JobanRapid","odpt.Railway:JR-East.Kashima"],山梨県:["odpt.Railway:Fujikyu.Fujikyu","odpt.Railway:JR-Central.Minobu","odpt.Railway:JR-East.Chuo","odpt.Railway:JR-East.ChuoRapid","odpt.Railway:JR-East.Koumi","odpt.Railway:JR-East.Oito"],静岡県:["odpt.Railway:JR-Central.TokaidoShinkansen","odpt.Railway:JR-Central.Gotemba","odpt.Railway:JR-Central.Minobu","odpt.Railway:JR-Central.Tokaido","odpt.Railway:IzuHakone.Sunzu","odpt.Railway:IzuHakone.Daiyuzan","odpt.Railway:Izukyu.Izukyu","odpt.Railway:JR-East.Ito"],宮城県:["odpt.Railway:JR-East.TohokuShinkansen","odpt.Railway:JR-East.Tohoku","odpt.Railway:JR-East.SensekiTohoku","odpt.Railway:JR-East.Senseki","odpt.Railway:JR-East.Senzan","odpt.Railway:JR-East.Ishinomaki","odpt.Railway:SendaiAirportTransit.SendaiAirport","odpt.Railway:SendaiMunicipal.Namboku","odpt.Railway:SendaiMunicipal.Tozai"],福島県:["odpt.Railway:Aizu.Aizu","odpt.Railway:JR-East.TohokuShinkansen","odpt.Railway:JR-East.YamagataShinkansen","odpt.Railway:JR-East.Tohoku","odpt.Railway:JR-East.OuYamagata","odpt.Railway:JR-East.Ou","odpt.Railway:JR-East.BanetsuEast","odpt.Railway:JR-East.BanetsuWest","odpt.Railway:JR-East.Tadami","odpt.Railway:JR-East.SuigunBranch"],新潟県:["odpt.Railway:JR-East.JoetsuShinkansen","odpt.Railway:JR-East.HokurikuShinkansen","odpt.Railway:JR-East.Joetsu","odpt.Railway:JR-East.Shinetsu","odpt.Railway:JR-East.Uetsu","odpt.Railway:JR-East.Echigo","odpt.Railway:JR-East.Hakushin","odpt.Railway:JR-East.Iiyama","odpt.Railway:JR-East.Yahiko","odpt.Railway:JR-East.Yonesaka","odpt.Railway:Hokuetsu.Hokuhoku"],長野県:["odpt.Railway:JR-East.HokurikuShinkansen","odpt.Railway:JR-East.Chuo","odpt.Railway:JR-East.ChuoTatsunoBranch","odpt.Railway:JR-East.Koumi","odpt.Railway:JR-East.Iiyama","odpt.Railway:JR-East.Oito","odpt.Railway:JR-East.Shinetsu","odpt.Railway:JR-East.Shinonoi"]},co=["北海道","青森県","岩手県","宮城県","秋田県","山形県","福島県","茨城県","栃木県","群馬県","埼玉県","千葉県","東京都","神奈川県","新潟県","富山県","石川県","福井県","山梨県","長野県","岐阜県","静岡県","愛知県","三重県","滋賀県","京都府","大阪府","兵庫県","奈良県","和歌山県","鳥取県","島根県","岡山県","広島県","山口県","徳島県","香川県","愛媛県","高知県","福岡県","佐賀県","長崎県","熊本県","大分県","宮崎県","鹿児島県","沖縄県"],po="東京メトロ",yo="都営",ho="東急",Ro="小田急",bo="京王",wo="西武",mo="東武",fo="京成",To="京急",go="相鉄",Eo="横浜市営",ko="千葉都市モノレール",So="富士急行",$o="秩父鉄道",Ao="いすみ鉄道",_o="銚子電気鉄道",Jo="伊豆箱根鉄道",xo="伊豆急行",vo="江ノ島電鉄",Io="会津鉄道",Co="ひたちなか海浜鉄道",Mo="北越急行",Lo="北総鉄道",No="上毛電気鉄道",Oo="上信電鉄",Ko="関東鉄道",Uo="鹿島臨海鉄道",Po="小湊鉄道",Ho="首都圏新都市鉄道 (つくばエクスプレス)",Do="舞浜リゾートライン",Bo="横浜高速鉄道",jo="小田急箱根",zo="流鉄",Yo="埼玉高速鉄道",Fo="埼玉新都市交通",Wo="仙台空港鉄道",qo="仙台市営",Go="芝山鉄道",Vo="新京成電鉄",Zo="湘南モノレール",Qo="東京臨海高速鉄道",Xo="多摩都市モノレール",ta="東葉高速鉄道",ea="宇都宮ライトレール",oa="わたらせ渓谷鐵道",aa="野岩鉄道",ia="横浜シーサイドライン",na="ゆりかもめ",sa={"JR-East":"JR東日本","JR-Central":"JR東海","JR-Shikoku":"JR四国","JR-West":"JR西日本",TokyoMetro:po,Toei:yo,Tokyu:ho,Odakyu:Ro,Keio:bo,Seibu:wo,Tobu:mo,Keisei:fo,Keikyu:To,Sotetsu:go,YokohamaMunicipal:Eo,ChibaMonorail:ko,Fujikyu:So,Chichibu:$o,Isumi:Ao,Choshi:_o,IzuHakone:Jo,Izukyu:xo,Enoden:vo,Aizu:Io,Hitachinaka:Co,Hokuetsu:Mo,Hokuso:Lo,Jomo:No,Joshin:Oo,KantoRailway:Ko,KashimaRinkai:Uo,Kominato:Po,MIR:Ho,MaihamaResort:Do,Minatomirai:Bo,OdakyuHakone:jo,Ryutetsu:zo,SaitamaRailway:Yo,SaitamaTransit:Fo,SendaiAirportTransit:Wo,SendaiMunicipal:qo,Shibayama:Go,ShinKeisei:Vo,ShonanMonorail:Zo,TWR:Qo,TamaMonorail:Xo,ToyoRapid:ta,UtsunomiyaLightRail:ea,WataraseKeikoku:oa,Yagan:aa,YokohamaSeaside:ia,Yurikamome:na},Y=5;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ht=globalThis,jt=ht.ShadowRoot&&(ht.ShadyCSS===void 0||ht.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,zt=Symbol(),Zt=new WeakMap;let $e=class{constructor(t,o,a){if(this._$cssResult$=!0,a!==zt)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=o}get styleSheet(){let t=this.o;const o=this.t;if(jt&&t===void 0){const a=o!==void 0&&o.length===1;a&&(t=Zt.get(o)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),a&&Zt.set(o,t))}return t}toString(){return this.cssText}};const ra=e=>new $e(typeof e=="string"?e:e+"",void 0,zt),Ae=(e,...t)=>{const o=e.length===1?e[0]:t.reduce(((a,i,n)=>a+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[n+1]),e[0]);return new $e(o,e,zt)},la=(e,t)=>{if(jt)e.adoptedStyleSheets=t.map((o=>o instanceof CSSStyleSheet?o:o.styleSheet));else for(const o of t){const a=document.createElement("style"),i=ht.litNonce;i!==void 0&&a.setAttribute("nonce",i),a.textContent=o.cssText,e.appendChild(a)}},Qt=jt?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let o="";for(const a of t.cssRules)o+=a.cssText;return ra(o)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:ua,defineProperty:da,getOwnPropertyDescriptor:ca,getOwnPropertyNames:pa,getOwnPropertySymbols:ya,getPrototypeOf:ha}=Object,ft=globalThis,Xt=ft.trustedTypes,Ra=Xt?Xt.emptyScript:"",ba=ft.reactiveElementPolyfillSupport,rt=(e,t)=>e,bt={toAttribute(e,t){switch(t){case Boolean:e=e?Ra:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let o=e;switch(t){case Boolean:o=e!==null;break;case Number:o=e===null?null:Number(e);break;case Object:case Array:try{o=JSON.parse(e)}catch{o=null}}return o}},Yt=(e,t)=>!ua(e,t),te={attribute:!0,type:String,converter:bt,reflect:!1,useDefault:!1,hasChanged:Yt};Symbol.metadata??=Symbol("metadata"),ft.litPropertyMetadata??=new WeakMap;let z=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,o=te){if(o.state&&(o.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((o=Object.create(o)).wrapped=!0),this.elementProperties.set(t,o),!o.noAccessor){const a=Symbol(),i=this.getPropertyDescriptor(t,a,o);i!==void 0&&da(this.prototype,t,i)}}static getPropertyDescriptor(t,o,a){const{get:i,set:n}=ca(this.prototype,t)??{get(){return this[o]},set(s){this[o]=s}};return{get:i,set(s){const r=i?.call(this);n?.call(this,s),this.requestUpdate(t,r,a)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??te}static _$Ei(){if(this.hasOwnProperty(rt("elementProperties")))return;const t=ha(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(rt("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(rt("properties"))){const o=this.properties,a=[...pa(o),...ya(o)];for(const i of a)this.createProperty(i,o[i])}const t=this[Symbol.metadata];if(t!==null){const o=litPropertyMetadata.get(t);if(o!==void 0)for(const[a,i]of o)this.elementProperties.set(a,i)}this._$Eh=new Map;for(const[o,a]of this.elementProperties){const i=this._$Eu(o,a);i!==void 0&&this._$Eh.set(i,o)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const o=[];if(Array.isArray(t)){const a=new Set(t.flat(1/0).reverse());for(const i of a)o.unshift(Qt(i))}else t!==void 0&&o.push(Qt(t));return o}static _$Eu(t,o){const a=o.attribute;return a===!1?void 0:typeof a=="string"?a:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),this.renderRoot!==void 0&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,o=this.constructor.elementProperties;for(const a of o.keys())this.hasOwnProperty(a)&&(t.set(a,this[a]),delete this[a]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return la(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,o,a){this._$AK(t,a)}_$ET(t,o){const a=this.constructor.elementProperties.get(t),i=this.constructor._$Eu(t,a);if(i!==void 0&&a.reflect===!0){const n=(a.converter?.toAttribute!==void 0?a.converter:bt).toAttribute(o,a.type);this._$Em=t,n==null?this.removeAttribute(i):this.setAttribute(i,n),this._$Em=null}}_$AK(t,o){const a=this.constructor,i=a._$Eh.get(t);if(i!==void 0&&this._$Em!==i){const n=a.getPropertyOptions(i),s=typeof n.converter=="function"?{fromAttribute:n.converter}:n.converter?.fromAttribute!==void 0?n.converter:bt;this._$Em=i;const r=s.fromAttribute(o,n.type);this[i]=r??this._$Ej?.get(i)??r,this._$Em=null}}requestUpdate(t,o,a){if(t!==void 0){const i=this.constructor,n=this[t];if(a??=i.getPropertyOptions(t),!((a.hasChanged??Yt)(n,o)||a.useDefault&&a.reflect&&n===this._$Ej?.get(t)&&!this.hasAttribute(i._$Eu(t,a))))return;this.C(t,o,a)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(t,o,{useDefault:a,reflect:i,wrapped:n},s){a&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,s??o??this[t]),n!==!0||s!==void 0)||(this._$AL.has(t)||(this.hasUpdated||a||(o=void 0),this._$AL.set(t,o)),i===!0&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(o){Promise.reject(o)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[i,n]of this._$Ep)this[i]=n;this._$Ep=void 0}const a=this.constructor.elementProperties;if(a.size>0)for(const[i,n]of a){const{wrapped:s}=n,r=this[i];s!==!0||this._$AL.has(i)||r===void 0||this.C(i,void 0,n,r)}}let t=!1;const o=this._$AL;try{t=this.shouldUpdate(o),t?(this.willUpdate(o),this._$EO?.forEach((a=>a.hostUpdate?.())),this.update(o)):this._$EM()}catch(a){throw t=!1,this._$EM(),a}t&&this._$AE(o)}willUpdate(t){}_$AE(t){this._$EO?.forEach((o=>o.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach((o=>this._$ET(o,this[o]))),this._$EM()}updated(t){}firstUpdated(t){}};z.elementStyles=[],z.shadowRootOptions={mode:"open"},z[rt("elementProperties")]=new Map,z[rt("finalized")]=new Map,ba?.({ReactiveElement:z}),(ft.reactiveElementVersions??=[]).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ft=globalThis,wt=Ft.trustedTypes,ee=wt?wt.createPolicy("lit-html",{createHTML:e=>e}):void 0,_e="$lit$",x=`lit$${Math.random().toFixed(9).slice(2)}$`,Je="?"+x,wa=`<${Je}>`,H=document,lt=()=>H.createComment(""),ut=e=>e===null||typeof e!="object"&&typeof e!="function",Wt=Array.isArray,ma=e=>Wt(e)||typeof e?.[Symbol.iterator]=="function",$t=`[ 	
\f\r]`,X=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,oe=/-->/g,ae=/>/g,C=RegExp(`>|${$t}(?:([^\\s"'>=/]+)(${$t}*=${$t}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),ie=/'/g,ne=/"/g,xe=/^(?:script|style|textarea|title)$/i,fa=e=>(t,...o)=>({_$litType$:e,strings:t,values:o}),nt=fa(1),D=Symbol.for("lit-noChange"),E=Symbol.for("lit-nothing"),se=new WeakMap,O=H.createTreeWalker(H,129);function ve(e,t){if(!Wt(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return ee!==void 0?ee.createHTML(t):t}const Ta=(e,t)=>{const o=e.length-1,a=[];let i,n=t===2?"<svg>":t===3?"<math>":"",s=X;for(let r=0;r<o;r++){const l=e[r];let d,y,u=-1,c=0;for(;c<l.length&&(s.lastIndex=c,y=s.exec(l),y!==null);)c=s.lastIndex,s===X?y[1]==="!--"?s=oe:y[1]!==void 0?s=ae:y[2]!==void 0?(xe.test(y[2])&&(i=RegExp("</"+y[2],"g")),s=C):y[3]!==void 0&&(s=C):s===C?y[0]===">"?(s=i??X,u=-1):y[1]===void 0?u=-2:(u=s.lastIndex-y[2].length,d=y[1],s=y[3]===void 0?C:y[3]==='"'?ne:ie):s===ne||s===ie?s=C:s===oe||s===ae?s=X:(s=C,i=void 0);const p=s===C&&e[r+1].startsWith("/>")?" ":"";n+=s===X?l+wa:u>=0?(a.push(d),l.slice(0,u)+_e+l.slice(u)+x+p):l+x+(u===-2?r:p)}return[ve(e,n+(e[o]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),a]};class dt{constructor({strings:t,_$litType$:o},a){let i;this.parts=[];let n=0,s=0;const r=t.length-1,l=this.parts,[d,y]=Ta(t,o);if(this.el=dt.createElement(d,a),O.currentNode=this.el.content,o===2||o===3){const u=this.el.content.firstChild;u.replaceWith(...u.childNodes)}for(;(i=O.nextNode())!==null&&l.length<r;){if(i.nodeType===1){if(i.hasAttributes())for(const u of i.getAttributeNames())if(u.endsWith(_e)){const c=y[s++],p=i.getAttribute(u).split(x),h=/([.?@])?(.*)/.exec(c);l.push({type:1,index:n,name:h[2],strings:p,ctor:h[1]==="."?Ea:h[1]==="?"?ka:h[1]==="@"?Sa:Tt}),i.removeAttribute(u)}else u.startsWith(x)&&(l.push({type:6,index:n}),i.removeAttribute(u));if(xe.test(i.tagName)){const u=i.textContent.split(x),c=u.length-1;if(c>0){i.textContent=wt?wt.emptyScript:"";for(let p=0;p<c;p++)i.append(u[p],lt()),O.nextNode(),l.push({type:2,index:++n});i.append(u[c],lt())}}}else if(i.nodeType===8)if(i.data===Je)l.push({type:2,index:n});else{let u=-1;for(;(u=i.data.indexOf(x,u+1))!==-1;)l.push({type:7,index:n}),u+=x.length-1}n++}}static createElement(t,o){const a=H.createElement("template");return a.innerHTML=t,a}}function G(e,t,o=e,a){if(t===D)return t;let i=a!==void 0?o._$Co?.[a]:o._$Cl;const n=ut(t)?void 0:t._$litDirective$;return i?.constructor!==n&&(i?._$AO?.(!1),n===void 0?i=void 0:(i=new n(e),i._$AT(e,o,a)),a!==void 0?(o._$Co??=[])[a]=i:o._$Cl=i),i!==void 0&&(t=G(e,i._$AS(e,t.values),i,a)),t}let ga=class{constructor(t,o){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=o}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:o},parts:a}=this._$AD,i=(t?.creationScope??H).importNode(o,!0);O.currentNode=i;let n=O.nextNode(),s=0,r=0,l=a[0];for(;l!==void 0;){if(s===l.index){let d;l.type===2?d=new Z(n,n.nextSibling,this,t):l.type===1?d=new l.ctor(n,l.name,l.strings,this,t):l.type===6&&(d=new $a(n,this,t)),this._$AV.push(d),l=a[++r]}s!==l?.index&&(n=O.nextNode(),s++)}return O.currentNode=H,i}p(t){let o=0;for(const a of this._$AV)a!==void 0&&(a.strings!==void 0?(a._$AI(t,a,o),o+=a.strings.length-2):a._$AI(t[o])),o++}};class Z{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,o,a,i){this.type=2,this._$AH=E,this._$AN=void 0,this._$AA=t,this._$AB=o,this._$AM=a,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const o=this._$AM;return o!==void 0&&t?.nodeType===11&&(t=o.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,o=this){t=G(this,t,o),ut(t)?t===E||t==null||t===""?(this._$AH!==E&&this._$AR(),this._$AH=E):t!==this._$AH&&t!==D&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):ma(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==E&&ut(this._$AH)?this._$AA.nextSibling.data=t:this.T(H.createTextNode(t)),this._$AH=t}$(t){const{values:o,_$litType$:a}=t,i=typeof a=="number"?this._$AC(t):(a.el===void 0&&(a.el=dt.createElement(ve(a.h,a.h[0]),this.options)),a);if(this._$AH?._$AD===i)this._$AH.p(o);else{const n=new ga(i,this),s=n.u(this.options);n.p(o),this.T(s),this._$AH=n}}_$AC(t){let o=se.get(t.strings);return o===void 0&&se.set(t.strings,o=new dt(t)),o}k(t){Wt(this._$AH)||(this._$AH=[],this._$AR());const o=this._$AH;let a,i=0;for(const n of t)i===o.length?o.push(a=new Z(this.O(lt()),this.O(lt()),this,this.options)):a=o[i],a._$AI(n),i++;i<o.length&&(this._$AR(a&&a._$AB.nextSibling,i),o.length=i)}_$AR(t=this._$AA.nextSibling,o){for(this._$AP?.(!1,!0,o);t!==this._$AB;){const a=t.nextSibling;t.remove(),t=a}}setConnected(t){this._$AM===void 0&&(this._$Cv=t,this._$AP?.(t))}}class Tt{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,o,a,i,n){this.type=1,this._$AH=E,this._$AN=void 0,this.element=t,this.name=o,this._$AM=i,this.options=n,a.length>2||a[0]!==""||a[1]!==""?(this._$AH=Array(a.length-1).fill(new String),this.strings=a):this._$AH=E}_$AI(t,o=this,a,i){const n=this.strings;let s=!1;if(n===void 0)t=G(this,t,o,0),s=!ut(t)||t!==this._$AH&&t!==D,s&&(this._$AH=t);else{const r=t;let l,d;for(t=n[0],l=0;l<n.length-1;l++)d=G(this,r[a+l],o,l),d===D&&(d=this._$AH[l]),s||=!ut(d)||d!==this._$AH[l],d===E?t=E:t!==E&&(t+=(d??"")+n[l+1]),this._$AH[l]=d}s&&!i&&this.j(t)}j(t){t===E?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class Ea extends Tt{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===E?void 0:t}}class ka extends Tt{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==E)}}class Sa extends Tt{constructor(t,o,a,i,n){super(t,o,a,i,n),this.type=5}_$AI(t,o=this){if((t=G(this,t,o,0)??E)===D)return;const a=this._$AH,i=t===E&&a!==E||t.capture!==a.capture||t.once!==a.once||t.passive!==a.passive,n=t!==E&&(a===E||i);i&&this.element.removeEventListener(this.name,this,a),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class $a{constructor(t,o,a){this.element=t,this.type=6,this._$AN=void 0,this._$AM=o,this.options=a}get _$AU(){return this._$AM._$AU}_$AI(t){G(this,t)}}const Aa={I:Z},_a=Ft.litHtmlPolyfillSupport;_a?.(dt,Z),(Ft.litHtmlVersions??=[]).push("3.3.1");const Ja=(e,t,o)=>{const a=o?.renderBefore??t;let i=a._$litPart$;if(i===void 0){const n=o?.renderBefore??null;a._$litPart$=i=new Z(t.insertBefore(lt(),n),n,void 0,o??{})}return i._$AI(e),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const qt=globalThis;let W=class extends z{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const o=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=Ja(o,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return D}};W._$litElement$=!0,W.finalized=!0,qt.litElementHydrateSupport?.({LitElement:W});const xa=qt.litElementPolyfillSupport;xa?.({LitElement:W});(qt.litElementVersions??=[]).push("4.2.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ie=e=>(t,o)=>{o!==void 0?o.addInitializer((()=>{customElements.define(e,t)})):customElements.define(e,t)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const va={attribute:!0,type:String,converter:bt,reflect:!1,hasChanged:Yt},Ia=(e=va,t,o)=>{const{kind:a,metadata:i}=o;let n=globalThis.litPropertyMetadata.get(i);if(n===void 0&&globalThis.litPropertyMetadata.set(i,n=new Map),a==="setter"&&((e=Object.create(e)).wrapped=!0),n.set(o.name,e),a==="accessor"){const{name:s}=o;return{set(r){const l=t.get.call(this);t.set.call(this,r),this.requestUpdate(s,l,e)},init(r){return r!==void 0&&this.C(s,void 0,e,r),r}}}if(a==="setter"){const{name:s}=o;return function(r){const l=this[s];t.call(this,r),this.requestUpdate(s,l,e)}}throw Error("Unsupported decorator location: "+a)};function _(e){return(t,o)=>typeof o=="object"?Ia(e,t,o):((a,i,n)=>{const s=i.hasOwnProperty(n);return i.constructor.createProperty(n,a),s?Object.getOwnPropertyDescriptor(i,n):void 0})(e,t,o)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ca={CHILD:2},Ma=e=>(...t)=>({_$litDirective$:e,values:t});class La{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,o,a){this._$Ct=t,this._$AM=o,this._$Ci=a}_$AS(t,o){return this.update(t,o)}update(t,o){return this.render(...o)}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:Na}=Aa,re=()=>document.createComment(""),tt=(e,t,o)=>{const a=e._$AA.parentNode,i=t===void 0?e._$AB:t._$AA;if(o===void 0){const n=a.insertBefore(re(),i),s=a.insertBefore(re(),i);o=new Na(n,s,e,e.options)}else{const n=o._$AB.nextSibling,s=o._$AM,r=s!==e;if(r){let l;o._$AQ?.(e),o._$AM=e,o._$AP!==void 0&&(l=e._$AU)!==s._$AU&&o._$AP(l)}if(n!==i||r){let l=o._$AA;for(;l!==n;){const d=l.nextSibling;a.insertBefore(l,i),l=d}}}return o},M=(e,t,o=e)=>(e._$AI(t,o),e),Oa={},Ka=(e,t=Oa)=>e._$AH=t,Ua=e=>e._$AH,At=e=>{e._$AR(),e._$AA.remove()};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const le=(e,t,o)=>{const a=new Map;for(let i=t;i<=o;i++)a.set(e[i],i);return a},Pa=Ma(class extends La{constructor(e){if(super(e),e.type!==Ca.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,o){let a;o===void 0?o=t:t!==void 0&&(a=t);const i=[],n=[];let s=0;for(const r of e)i[s]=a?a(r,s):s,n[s]=o(r,s),s++;return{values:n,keys:i}}render(e,t,o){return this.dt(e,t,o).values}update(e,[t,o,a]){const i=Ua(e),{values:n,keys:s}=this.dt(t,o,a);if(!Array.isArray(i))return this.ut=s,n;const r=this.ut??=[],l=[];let d,y,u=0,c=i.length-1,p=0,h=n.length-1;for(;u<=c&&p<=h;)if(i[u]===null)u++;else if(i[c]===null)c--;else if(r[u]===s[p])l[p]=M(i[u],n[p]),u++,p++;else if(r[c]===s[h])l[h]=M(i[c],n[h]),c--,h--;else if(r[u]===s[h])l[h]=M(i[u],n[h]),tt(e,l[h+1],i[u]),u++,h--;else if(r[c]===s[p])l[p]=M(i[c],n[p]),tt(e,i[u],i[c]),c--,p++;else if(d===void 0&&(d=le(s,p,h),y=le(r,u,c)),d.has(r[u]))if(d.has(r[c])){const R=y.get(s[p]),m=R!==void 0?i[R]:null;if(m===null){const f=tt(e,i[u]);M(f,n[p]),l[p]=f}else l[p]=M(m,n[p]),tt(e,i[u],m),i[R]=null;p++}else At(i[c]),c--;else At(i[u]),u++;for(;p<=h;){const R=tt(e,l[h+1]);M(R,n[p]),l[p++]=R}for(;u<=c;){const R=i[u++];R!==null&&At(R)}return this.ut=s,Ka(e,l),D}});var Ha=Object.defineProperty,Da=Object.getOwnPropertyDescriptor,Q=(e,t,o,a)=>{for(var i=a>1?void 0:a?Da(t,o):t,n=e.length-1,s;n>=0;n--)(s=e[n])&&(i=(a?s(t,o,i):s(i))||i);return a&&i&&Ha(t,o,i),i};let I=class extends W{constructor(){super(...arguments),this.departureTime="",this.trainTypeName="",this.trainTypeClass="",this.destination="",this.minutesText="--"}connectedCallback(){super.connectedCallback();const e=Xe();if(e&&this.shadowRoot)try{this.shadowRoot.adoptedStyleSheets=[...this.shadowRoot.adoptedStyleSheets,e]}catch(t){console.warn("Failed to adopt train type stylesheet:",t)}}render(){return nt`
      <div class="minutes-col" data-departure="${this.departureTime}">${this.minutesText}</div>
      <div class="time-col">${this.departureTime||"--"}</div>
      <div class="train-type-badge-wrapper">
        <span part="badge" class="train-type-badge ${this.trainTypeClass}">${this.trainTypeName}</span>
      </div>
      <div class="destination-text">${this.destination}</div>
    `}};I.styles=Ae`
    /* Use display: contents to make this component transparent to layout,
       allowing its children to participate in the parent grid */
    :host {
      display: contents;
    }

    /* Minutes column - small numeric column */
    .minutes-col {
      font-size: 1.5rem;
      font-weight: 700;
      text-align: center;
      color: #fff;
    }

    /* Time column - large and prominent */
    .time-col {
      font-size: 3rem;
      font-weight: 700;
      line-height: 1;
      text-align: center;
      align-self: center;
    }

    .train-type-badge-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Train Type badge */
    .train-type-badge {
      font-size: 1.5rem;
      font-weight: 800;
      padding: 0.25rem 0.5rem;
      border-radius: 0.5rem;
      text-align: center;
      line-height: 1.2;
      align-self: center;
      max-width: fit-content;
      white-space: nowrap;
      /* Default colors for fallback */
      background-color: #333;
      color: #fff;
      border: 2px solid #333;
    }

    /* Default style for unknown/local train types */
    .type-LOC {
      background-color: #333;
      color: #fff;
      border: 2px solid #333;
    }

    /* Destination Text */
    .destination-text {
      font-size: 1.75rem;
      font-weight: 600;
      line-height: 1.2;
      align-self: center;
      text-align: center;
      word-break: break-word;
    }

    /* Responsive: mobile-friendly layout tweaks */
    @media (max-width: 640px) {
      .minutes-col {
        font-size: 1rem;
      }

      .time-col {
        font-size: 1rem;
        text-align: left;
        line-height: 1;
      }

      .train-type-badge {
        font-size: 1rem;
        padding: 0.2rem 0.45rem;
        align-items: center;
        justify-content: flex-start;
      }

      .destination-text {
        font-size: 1rem;
        text-align: center;
        word-break: break-word;
      }
    }
  `;Q([_({type:String})],I.prototype,"departureTime",2);Q([_({type:String})],I.prototype,"trainTypeName",2);Q([_({type:String})],I.prototype,"trainTypeClass",2);Q([_({type:String})],I.prototype,"destination",2);Q([_({type:String})],I.prototype,"minutesText",2);I=Q([Ie("train-row")],I);var Ba=Object.defineProperty,ja=Object.getOwnPropertyDescriptor,ct=(e,t,o,a)=>{for(var i=a>1?void 0:a?ja(t,o):t,n=e.length-1,s;n>=0;n--)(s=e[n])&&(i=(a?s(t,o,i):s(i))||i);return a&&i&&Ba(t,o,i),i};let B=class extends W{constructor(){super(...arguments),this.departures=[],this.stationNameCache=null,this.trainTypeMap={},this.loading=!1}getDestinationTitle(e){if(!this.stationNameCache)return"N/A";let t="N/A";const o=e["odpt:destinationStation"];if(Array.isArray(o)&&o.length>0){const a=o[0];if(typeof a=="string")t=this.stationNameCache.get(a)||a;else if(a&&typeof a=="object"&&(t=a["dc:title"]||a.title||"N/A",(!t||t==="N/A")&&a["owl:sameAs"])){const i=a["owl:sameAs"];typeof i=="string"&&(t=this.stationNameCache.get(i)||i)}}else typeof o=="string"&&(t=this.stationNameCache.get(o)||o);return t}render(){return this.loading?nt`<p class="loading-message">時刻表を取得中...</p>`:this.departures.length===0?nt`<p class="empty-message">本日の発車予定はありません。</p>`:nt`
      ${Pa(this.departures,(e,t)=>e["odpt:departureTime"]||`train-${t}`,e=>{const t=e["odpt:departureTime"]||"",o=e["odpt:trainType"]||"",a=this.getDestinationTitle(e),i=this.trainTypeMap[o]||{name:"不明",class:"type-LOC"};return nt`
            <train-row
              departureTime="${t}"
              trainTypeName="${i.name}"
              trainTypeClass="${i.class}"
              destination="${a}"
            ></train-row>
          `})}
    `}};B.styles=Ae`
    :host {
      display: grid;
      /* Columns: minutes | time | train-type | destination */
      grid-template-columns: 1fr 1fr 1fr 1.5fr;
      gap: 0.5rem;
      row-gap: 0.5rem;
      align-items: center;
    }

    .empty-message {
      text-align: center;
      font-size: 1.5rem;
      padding-top: 2rem;
      grid-column: 1 / -1;
    }

    .loading-message {
      text-align: center;
      font-size: 1.5rem;
      padding-top: 2rem;
      grid-column: 1 / -1;
    }

    /* Responsive: mobile-friendly layout tweaks */
    @media (max-width: 640px) {
      :host {
        grid-template-columns: 1fr 1fr 1fr 2fr;
        gap: 0.25rem;
        row-gap: 0.25rem;
      }
    }
  `;ct([_({type:Array})],B.prototype,"departures",2);ct([_({type:Object})],B.prototype,"stationNameCache",2);ct([_({type:Object})],B.prototype,"trainTypeMap",2);ct([_({type:Boolean})],B.prototype,"loading",2);B=ct([Ie("departures-list")],B);const U="t2board_railway_uri",P="t2board_station_uri",Pt="t2board_api_key",Ce="t2board_recent_railways",et="t2board_prefecture",za=5,Ya=15e3;let ue=!1,de=!1,ce=!1;function Fa(e){document.title=e}function Wa(e){const t=document.getElementById("station-header");t&&(t.textContent=e||"")}function qa(){const e=document.getElementById("departures-inbound"),t=document.getElementById("departures-outbound");let o=e?.querySelector("departures-list"),a=t?.querySelector("departures-list");o||(o=document.createElement("departures-list"),e&&(e.innerHTML="",e.appendChild(o))),a||(a=document.createElement("departures-list"),t&&(t.innerHTML="",t.appendChild(a))),o&&(o.loading=!0),a&&(a.loading=!0)}function Ga(e,t){const o=document.getElementById("direction-inbound-header"),a=document.getElementById("direction-outbound-header");o&&(o.textContent=`${e}行き`),a&&(a.textContent=`${t}行き`)}function pe(e,t,o,a){const i=document.getElementById(`departures-${e}`);if(!i)return;let n=i.querySelector("departures-list");n||(n=document.createElement("departures-list"),i.innerHTML="",i.appendChild(n)),n.departures=t,n.stationNameCache=o,n.trainTypeMap=a,n.loading=!1}let _t,Me=[],Le=[],Ht=Y-1,Dt=Y-1;function Va(e){const[t,o]=(e||"").split(":"),a=Number(t||0),i=Number(o||0);return a*3600+i*60}function ye(e,t,o,a){const i=new Date,n=i.getHours()*3600+i.getMinutes()*60+i.getSeconds(),s=(r,l)=>{const d=document.getElementById(`departures-${r}`);if(!d||!l||!o||!a){console.warn(`updateMinutesOnce: Missing required parameters for ${r}`,{container:!!d,trainCache:!!l,stationNameCache:!!o,trainTypeMap:!!a});return}const y=d.querySelector("departures-list");if(!y)return;const u=Array.from(y.shadowRoot?.querySelectorAll("train-row")||[]);if(u.length===0)return;const c=r==="inbound"?Me:Le,p=r==="inbound"?Ht:Dt,h=[];if(u.forEach((R,m)=>{const f=R.getAttribute("departuretime")||"",w=Va(f)-n;if(w<=0)h.push(m);else if(w<=60)R.minutesText="到着";else{const g=Math.ceil(w/60);R.minutesText=`${g}分`}}),h.length>0){const R=p+1,m=l.slice(R,R+h.length);m.length>0&&(r==="inbound"?Ht=R+m.length-1:Dt=R+m.length-1),h.map(g=>c[g]).filter(Boolean).forEach(g=>{const k=c.indexOf(g);k>-1&&c.splice(k,1)}),m.forEach(g=>{const k=g["odpt:departureTime"];k&&!c.includes(k)&&c.push(k)});const w=[...y.departures].filter((g,k)=>!h.includes(k));w.push(...m),y.departures=w}};s("inbound",e),s("outbound",t)}function Za(e,t,o,a,i=Ya){e&&(Me=e.slice(0,Y).map(n=>n["odpt:departureTime"]).filter(Boolean),Ht=Y-1),t&&(Le=t.slice(0,Y).map(n=>n["odpt:departureTime"]).filter(Boolean),Dt=Y-1),ye(e,t,o,a),typeof _t<"u"&&clearInterval(_t),_t=window.setInterval(()=>ye(e,t,o,a),i)}function he(){const e=document.getElementById("time-header");e&&(e.textContent=fe())}function Re(e,t){const o=localStorage.getItem(P),a=e.find(n=>n.name===t)||e[0];let i=a;if(o){const n=e.find(s=>s.uri===o);n&&(i=n)}else e.length>0&&(i=a||e[0]);return i}function Ne(){try{const e=localStorage.getItem(Ce);return e?JSON.parse(e):[]}catch{return[]}}function Qa(e){try{let t=Ne();t=t.filter(o=>o!==e),t.unshift(e),t=t.slice(0,za),localStorage.setItem(Ce,JSON.stringify(t))}catch(t){console.warn("Failed to save recent railway:",t)}}function Xa(e,t){const o=localStorage.getItem(U),a=e.find(n=>n.uri===t)||e[0];let i=a;if(o){const n=e.find(s=>s.uri===o);n&&(i=n)}else e.length>0&&(i=a||e[0]);return i}function Oe(e){if(!e)return"その他";const t=e.split(":"),o=t.length>1?t[1]:e;return sa[o]||o}function ti(e,t,o,a,i,n,s){const r=document.getElementById("config-modal"),l=document.getElementById("railway-select"),d=document.getElementById("station-select"),y=document.getElementById("prefecture-select");if(!r||!l||!d||!y)return;function u(R,m){if(!l)return;let f="";const b=Ne();let w=null;m&&St[m]&&(w=new Set(St[m]));const g=b.map(T=>e.find($=>$.uri===T)).filter(T=>T!==void 0).filter(T=>w?w.has(T.uri):!0);if(g.length>0){f+='<optgroup label="最近使用した路線">';for(const T of g)f+=`<option value="${T.uri}" ${T.uri===R?"selected":""}>${T.name}</option>`;f+="</optgroup>"}const k=new Map;for(const T of e){if(w&&!w.has(T.uri))continue;const $=Oe(T.operator);k.has($)||k.set($,[]),k.get($).push(T)}const Et=Array.from(k.keys()).sort((T,$)=>T.localeCompare($,"ja"));for(const T of Et){const $=k.get(T);f+=`<optgroup label="${T}">`;for(const kt of $)f+=`<option value="${kt.uri}" ${kt.uri===R?"selected":""}>${kt.name}</option>`;f+="</optgroup>"}l.innerHTML=f}function c(R){if(!y)return;const m=new Set(Object.keys(St)),f=co.filter(b=>m.has(b));y.innerHTML=f.map(b=>`<option value="${b}" ${b===R?"selected":""}>${b}</option>`).join("")}function p(R){if(!d)return;const m=J();d.innerHTML=m.map(f=>`<option value="${f.uri}" ${f.uri===R?"selected":""}>${f.name}</option>`).join("")}const h=localStorage.getItem(et)||"東京都";c(h),u(o,h),p(a),de||(document.getElementById("settings-button")?.addEventListener("click",()=>{const b=localStorage.getItem(U),w=localStorage.getItem(P),g=localStorage.getItem(et)||"東京都";c(g),u(b,g),p(w),ei()}),document.getElementById("close-modal")?.addEventListener("click",()=>{Jt()}),l?.addEventListener("change",async()=>{if(!l)return;const b=l.value;if(d&&(d.innerHTML="<option>駅を読込中...</option>",d.disabled=!0),s)try{await s(b),p(null)}catch(w){console.error("Failed to load stations:",w),d&&(d.innerHTML="<option>駅の読込に失敗しました</option>")}finally{d&&(d.disabled=!1)}}),y?.addEventListener("change",async()=>{if(!y)return;const b=y.value;try{localStorage.setItem(et,b)}catch{}u(null,b)}),document.getElementById("save-settings")?.addEventListener("click",()=>{if(!l||!d||!y)return;const b=l.value,w=d.value,g=y.value,k=localStorage.getItem(U),Et=localStorage.getItem(P),T=localStorage.getItem(et);localStorage.setItem(et,g),localStorage.setItem(U,b),localStorage.setItem(P,w),Qa(b),g!==T||b!==k?i(b):w!==Et&&n(w),Jt()}),r.addEventListener("click",b=>{b.target===r&&Jt()}),de=!0)}function be(e,t){const o=document.getElementById("api-key-modal"),a=document.getElementById("api-key-input");if(!(!o||!a)&&(a.value=e||"",!ue)){const i=document.getElementById("save-api-key"),n=document.getElementById("close-api-key");i?.addEventListener("click",()=>{const s=a.value?a.value.trim():null;s?localStorage.setItem(Pt,s):localStorage.removeItem(Pt),t(s),xt()}),n?.addEventListener("click",()=>xt()),o.addEventListener("click",s=>{s.target===o&&xt()}),ue=!0}}function ei(){const e=document.getElementById("config-modal");e&&(e.classList.remove("hidden"),e.classList.add("flex","opacity-100"))}function Jt(){const e=document.getElementById("config-modal");e&&(e.classList.remove("flex","opacity-100"),e.classList.add("hidden"))}function Ke(){const e=document.getElementById("api-key-modal");e&&(e.classList.remove("hidden"),e.classList.add("flex","opacity-100"))}function xt(){const e=document.getElementById("api-key-modal");e&&(e.classList.remove("flex","opacity-100"),e.classList.add("hidden"))}function Ue(e,t="info"){const o=document.getElementById("status-banner");o&&(o.classList.remove("hidden"),o.classList.remove("bg-red-100","bg-yellow-100","bg-blue-100","text-red-800"),t==="error"?o.classList.add("bg-red-100","text-red-800"):t==="warn"?o.classList.add("bg-yellow-100"):o.classList.add("bg-blue-100"),o.textContent=e)}function oi(){const e=document.getElementById("status-banner");e&&(e.classList.add("hidden"),e.textContent="")}function ai(){const e=document.getElementById("location-modal");e&&(e.classList.remove("hidden"),e.classList.add("flex","opacity-100"))}function vt(){const e=document.getElementById("location-modal");e&&(e.classList.remove("flex","opacity-100"),e.classList.add("hidden"))}function It(e){const t=document.getElementById("location-status");t&&(t.textContent=e)}function ii(e){const t=document.getElementById("location-modal"),o=document.getElementById("location-button"),a=document.getElementById("close-location-modal"),i=document.getElementById("nearby-stations-list");!t||!o||!a||!i||ce||(a.addEventListener("click",()=>{vt()}),t.addEventListener("click",n=>{n.target===t&&vt()}),i.addEventListener("click",n=>{const r=n.target.closest("[data-station-uri]");if(r){const l=r.getAttribute("data-station-uri"),d=r.getAttribute("data-railway-uri");l&&d&&(e(l,d),vt())}}),o.addEventListener("click",async()=>{ai(),It("現在地を取得中..."),i.innerHTML="";try{const{getCurrentPosition:n,findNearbyStations:s,formatDistance:r}=await Ve(async()=>{const{getCurrentPosition:c,findNearbyStations:p,formatDistance:h}=await import("./location-BThkm30G.js");return{getCurrentPosition:c,findNearbyStations:p,formatDistance:h}},[],import.meta.url),l=await n(),{latitude:d,longitude:y}=l.coords;It(`現在地: ${d.toFixed(4)}, ${y.toFixed(4)}`);const u=s(d,y,5);if(u.length===0){const c=document.createElement("p");c.className="text-center text-lg",c.textContent="近くに駅が見つかりませんでした",i.appendChild(c);return}u.forEach(c=>{const p=document.createElement("button");p.className="w-full text-left p-4 mb-2 bg-gray-800 hover:bg-gray-700 rounded-lg transition border-2 border-white",p.setAttribute("data-station-uri",c.uri),p.setAttribute("data-railway-uri",c.railway);const h=document.createElement("div");h.className="font-bold text-xl",h.textContent=c.name;const R=Ut().find(g=>g.uri===c.railway),m=R?R.name:c.railway,f=Oe(R?R.operator:c.operator),b=document.createElement("div");b.className="text-sm text-gray-300 mt-1",b.textContent=`${f} / ${m}`;const w=document.createElement("div");w.className="text-sm text-gray-300 mt-1",w.textContent=`距離: ${r(c.distance)}`,p.appendChild(h),p.appendChild(b),p.appendChild(w),i.appendChild(p)})}catch(n){const s=n instanceof Error?n:new Error(String(n));console.error("Location error:",s),It("エラー: "+s.message);const r=document.createElement("p");r.className="text-center text-lg text-red-400",r.textContent="位置情報の取得に失敗しました。ブラウザの設定で位置情報の使用を許可してください。",i.appendChild(r)}}),ce=!0)}let gt=null,Pe="https://api-challenge.odpt.org/api/v4/",He="odpt.Railway:Tokyu.Toyoko",Bt="武蔵小杉 (TY11)";const ni=3e5,si=3e5,ri=1e4;function we(e){gt=e}function v(){return gt}function V(){return Pe}async function li(){try{const e=await fetch("./config.json",{cache:"no-store"});if(!e.ok)return;const t=await e.json();t?.ODPT_API_KEY&&(gt=t.ODPT_API_KEY),t?.DEFAULT_RAILWAY&&(He=t.DEFAULT_RAILWAY),t?.DEFAULT_STATION_NAME&&(Bt=t.DEFAULT_STATION_NAME),t?.API_BASE_URL&&(Pe=t.API_BASE_URL)}catch(e){const t=e instanceof Error?e:new Error(String(e));console.warn("Failed to load ./config.json:",t.message)}}async function ui(){await li();try{const e=localStorage.getItem(Pt);e&&(gt=e)}catch{}}let S={railwayUri:null,stationUri:null,stationName:null},Ct,Mt;function A(){return S}function L(e){S=e}function di(){if(!v()){const a=document.getElementById("departures-inbound"),i=document.getElementById("departures-outbound"),n='<p class="text-center text-red-500 text-2xl pt-8">エラー: config.json に ODPT_API_KEY を設定してください。</p>';return a&&(a.innerHTML=n),i&&(i.innerHTML=n),null}const o=J().find(a=>a.uri===S.stationUri);if(!o||!S.railwayUri){const a=Te("station-header");return a&&(a.textContent="エラー: 駅または路線が選択されていません"),null}return o}async function Rt(e){const t=v();if(!t)return!1;let o=[];try{o=await De(e,t,V(),S.railwayUri)}catch(r){return console.error("Failed to fetch timetable:",r),Ue("API エラーが発生しました。API キーを確認してください。","error"),Ke(),!1}const i=me(fe(new Date)),n=Gt(o,oo(),i),s=Gt(o,ao(),i);return await uo(t,V(),n,s),pe("inbound",n,N,st),pe("outbound",s,N,st),Za(n,s,N,st),!0}async function ci(){const e=v();if(e)try{S.railwayUri&&(await Lt(e,V(),S.railwayUri),oi())}catch(t){console.warn("Failed to fetch status:",t),Ue("運行情報取得でエラーが発生しました。API キーを確認してください。","warn")}}function pi(e){typeof Ct<"u"&&clearInterval(Ct),typeof Mt<"u"&&clearInterval(Mt),Ct=window.setInterval(async()=>{try{const t=localStorage.getItem(P);t?await Rt(t):await Rt(S.stationUri)}catch{S.stationUri&&await Rt(S.stationUri)}},ni),Mt=window.setInterval(async()=>{const t=v();if(t)try{const a=localStorage.getItem(U)||S.railwayUri;a&&await Lt(t,V(),a)}catch{S.railwayUri&&await Lt(t,V(),S.railwayUri)}},si),window.setInterval(he,ri),he()}async function yt(){try{const o=localStorage.getItem(U),a=localStorage.getItem(P);if(o&&(S.railwayUri=o),a){S.stationUri=a;const n=J().find(s=>s.uri===a);n&&(S.stationName=n.name)}}catch(o){console.warn("Failed to load config from localStorage:",o)}const e=di();!e||(Wa(e.name),qa(),Ga(io(),no()),!await Rt(e.uri))||(await ci(),pi(e.uri))}async function mt(){try{await ui()}catch(n){const s=n instanceof Error?n:new Error(String(n));console.warn("Error loading local config:",s.message)}if(Qe(),!v()){be(v(),n=>{n&&we(n),mt()}),Ke();return}const e=String(v()),t=V();await ro(e,t),await lo(e,t);try{const s=(await je(e,t)).filter(r=>r["@type"]==="odpt:Railway").map(r=>{const l=q(r["dc:title"]||r["odpt:railwayTitle"]),d=r["odpt:operator"]||"";return{uri:r["owl:sameAs"]||r["@id"]||"",name:l,operator:d}}).filter(r=>r.uri&&r.name).sort((r,l)=>r.name.localeCompare(l.name,"ja"));so(s)}catch(n){const s=n instanceof Error?n:new Error(String(n));console.error("Error fetching railway list:",s.message);const r=Te("station-header");r&&(r.textContent="エラー: 路線リスト取得失敗")}const o=Xa(Ut(),He);let a=A();o&&(a.railwayUri=o.uri,L(a),await pt(o.uri,e,t));const i=Re(J(),Bt);i&&(a=A(),a.stationUri=i.uri,a.stationName=i.name,L(a)),be(v(),n=>{n&&we(n),mt()}),ti(Ut(),J(),A().railwayUri,A().stationUri,async n=>{let s=A();s.railwayUri=n,L(s),await pt(n,e,t);const r=Re(J(),Bt);r&&(s=A(),s.stationUri=r.uri,s.stationName=r.name,L(s)),yt()},n=>{const s=J().find(l=>l.uri===n),r=A();r.stationUri=n,r.stationName=s?s.name:null,L(r),yt()},async n=>{await pt(n,e,t)}),ii(async(n,s)=>{let r=A();r.railwayUri!==s&&(r.railwayUri=s,L(r),localStorage.setItem(U,s),await pt(s,e,t));const l=J().find(d=>d.uri===n);r=A(),r.stationUri=n,r.stationName=l?l.name:null,L(r),localStorage.setItem(P,n),yt()}),yt()}window.initializeBoard=mt;window.onload=mt;
