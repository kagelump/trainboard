(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=a(e);fetch(e.href,n)}})();async function N(t,o=3,a=1e3){for(let i=0;i<o;i++)try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP ${e.status}`);return e}catch(e){if(i===o-1)throw e;await new Promise(n=>setTimeout(n,a*2**i))}throw new Error("Unreachable")}async function Ht(t,o,a,i){if(!o||!a||!t||!i)throw new Error("API key, base URL, station URI, and railway URI are required");const e=(()=>{const s=new Date().getDay();return s>=1&&s<=5?"odpt.Calendar:Weekday":"odpt.Calendar:SaturdayHoliday"})(),n=new URLSearchParams({"acl:consumerKey":String(o),"odpt:railway":i,"odpt:station":t,"odpt:calendar":e}),u=`${a}odpt:StationTimetable?${n.toString()}`;return await(await N(u)).json()}async function nt(t,o,a){if(!t||!o||!a)throw new Error("API key, base URL, and railway URI are required");const i=new URLSearchParams({"acl:consumerKey":String(t),"odpt:railway":a}),e=`${o}odpt:TrainInformation?${i.toString()}`;return await(await N(e)).json()}async function Dt(t,o,a){if(!o||!a)throw new Error("API key and base URL are required");if(t.length===0)return[];const i=new URLSearchParams({"acl:consumerKey":String(o)});i.append("owl:sameAs",t.join(","));const e=`${a}odpt:Station?${i.toString()}`;return await(await N(e)).json()}async function Pt(t,o){if(!t||!o)throw new Error("API key and base URL are required");const a=new URLSearchParams({"acl:consumerKey":String(t)}),i=`${o}odpt:Railway?${a.toString()}`;return await(await N(i)).json()}async function Yt(t,o,a){if(!o||!a||!t)throw new Error("API key, base URL, and railway URI are required");const i=new URLSearchParams({"acl:consumerKey":String(o)});i.append("owl:sameAs",t);const e=`${a}odpt:Railway?${i.toString()}`,u=await(await N(e)).json();return u.length>0?u[0]:null}async function $t(t,o){if(!t||!o)throw new Error("API key and base URL are required");const a=new URLSearchParams({"acl:consumerKey":String(t)}),i=`${o}odpt:RailDirection?${a.toString()}`;return await(await N(i)).json()}async function jt(t,o){if(!t||!o)throw new Error("API key and base URL are required");const a=new URLSearchParams({"acl:consumerKey":String(t)}),i=`${o}odpt:TrainType?${a.toString()}`;return await(await N(i)).json()}function U(t){if(!t)return"N/A";if(typeof t=="string")return t;const o=t;return o.ja||o.en||"N/A"}function St(t){const[o,a]=t.split(":").map(i=>Number(i));return o*60+a}function ct(t,o,a,i=5){return(t.find(u=>u["odpt:railDirection"]===o)?.["odpt:stationTimetableObject"]??[]).filter(u=>typeof u["odpt:departureTime"]=="string").filter(u=>St(u["odpt:departureTime"])>=a).slice(0,i)}function zt(...t){const o=new Set;for(const a of t)for(const i of a??[]){const e=i["odpt:destinationStation"];if(e)if(Array.isArray(e)){for(const n of e)if(n){if(typeof n=="string")o.add(n);else if(typeof n=="object"){const u=n["owl:sameAs"]||n["@id"]||n.id;u&&typeof u=="string"&&o.add(u)}}}else typeof e=="string"&&o.add(e)}return o}function gt(t=new Date){return`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function Jt(t){return document.getElementById(t)}const Ft="modulepreload",Wt=function(t,o){return new URL(t,o).href},yt={},Gt=function(o,a,i){let e=Promise.resolve();if(a&&a.length>0){let l=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};const u=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),s=d?.nonce||d?.getAttribute("nonce");e=l(a.map(c=>{if(c=Wt(c,i),c in yt)return;yt[c]=!0;const f=c.endsWith(".css"),w=f?'[rel="stylesheet"]':"";if(i)for(let R=u.length-1;R>=0;R--){const b=u[R];if(b.href===c&&(!f||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${w}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":Ft,f||(p.as="script"),p.crossOrigin="",p.href=c,s&&p.setAttribute("nonce",s),document.head.appendChild(p),f)return new Promise((R,b)=>{p.addEventListener("load",R),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function n(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return e.then(u=>{for(const d of u||[])d.status==="rejected"&&n(d.reason);return o().catch(n)})};class qt{constructor(o=500,a,i){if(this.maxEntries=o,this.ttlMs=a,this.persistKeyName=i,this.map=new Map,i&&typeof localStorage<"u")try{const e=localStorage.getItem(i);if(e){const n=JSON.parse(e);for(const u of Object.keys(n)){const d=n[u];(!d.expires||d.expires>Date.now())&&this.map.set(u,d)}}}catch(e){console.warn(`Failed to restore cache from localStorage key "${i}":`,e)}}get(o){const a=this.map.get(o);if(a){if(a.expires&&a.expires<=Date.now()){this.map.delete(o);return}return this.map.delete(o),this.map.set(o,a),a.v}}set(o,a){const i=this.ttlMs?Date.now()+this.ttlMs:void 0;for(this.map.has(o)&&this.map.delete(o),this.map.set(o,{v:a,expires:i});this.map.size>this.maxEntries;){const e=this.map.keys().next().value;this.map.delete(e)}this.persistKeyName&&this.persist()}has(o){return typeof this.get(o)<"u"}persist(){if(this.persistKeyName)try{const o={};for(const[a,i]of this.map.entries())o[a]=i;localStorage.setItem(this.persistKeyName,JSON.stringify(o))}catch(o){console.warn(`Failed to persist cache to localStorage key "${this.persistKeyName}":`,o)}}keys(){return Array.from(this.map.keys())}enablePersistence(o){this.persistKeyName=o,this.persist()}}const It={"odpt.TrainType:Sotetsu.CommuterExpress":{outline:"black",text:"red",fill:"black"},"odpt.TrainType:Sotetsu.CommuterLimitedExpress":{outline:"black",text:"red",fill:"white"},"odpt.TrainType:Sotetsu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Sotetsu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Sotetsu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Sotetsu.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:Odakyu.CommuterExpress":{outline:"black",text:"red",fill:"black"},"odpt.TrainType:Odakyu.CommuterSemiExpress":{outline:"black",text:"yellow",fill:"black"},"odpt.TrainType:Odakyu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Odakyu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Odakyu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Odakyu.RapidExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Odakyu.SemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Keikyu.AccessExpress":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Keikyu.AirportRapidLimitedExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Keikyu.CommuterLimitedExpress":{outline:"black",text:"red",fill:"white"},"odpt.TrainType:Keikyu.EveningWing":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Keikyu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Keikyu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Keikyu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Keikyu.MorningWing":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Keikyu.RapidLimitedExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Keikyu.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:Seibu.CommuterExpress":{outline:"black",text:"red",fill:"black"},"odpt.TrainType:Seibu.CommuterSemiExpress":{outline:"black",text:"yellow",fill:"black"},"odpt.TrainType:Seibu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Seibu.F-Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Seibu.HaijimaLiner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Seibu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Seibu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Seibu.RapidExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Seibu.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:Seibu.S-TRAIN":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Seibu.SemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Tokyu.CommuterLimitedExpress":{outline:"yellow",text:"red",fill:"white"},"odpt.TrainType:Tokyu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Tokyu.F-Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tokyu.LimitedExpress":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tokyu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Tokyu.S-TRAIN":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tokyu.SemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Tobu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Tobu.F-Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tobu.KawagoeLimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Tobu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Tobu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Tobu.RapidExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Tobu.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:Tobu.SL-Taiju":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tobu.SectionExpress":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Tobu.SectionSemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Tobu.SemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Tobu.TH-LINER":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tobu.TJ-Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:JR-East.ChuoSpecialRapid":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:JR-East.CommuterRapid":{outline:"black",text:"red",fill:"black"},"odpt.TrainType:JR-East.CommuterSpecialRapid":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:JR-East.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:JR-East.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:JR-East.Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:JR-East.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:JR-East.OmeSpecialRapid":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:JR-East.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:JR-East.SpecialRapid":{outline:"black",text:"yellow",fill:"red"}};function Vt(){if(document.getElementById("train-type-dynamic-styles"))return;const t=document.createElement("style");t.id="train-type-dynamic-styles";let o="";for(const[a,i]of Object.entries(It)){const e=xt(a);o+=`
.${e} {
  background-color: ${i.fill};
  color: ${i.text};
  border: 2px solid ${i.outline};
}
`}t.textContent=o,document.head.appendChild(t)}function xt(t){return"train-type-"+t.replace(/[:.]/g,"-")}function Zt(t){return t in It?xt(t):"type-LOC"}const Xt={"odpt.Railway:Odakyu.Odawara":{inbound:"新宿",outbound:"小田原"},"odpt.Railway:Keikyu.Main":{inbound:"品川",outbound:"浦賀"},"odpt.Railway:Tobu.Nikko":{inbound:"浅草",outbound:"東武日光"},"odpt.Railway:Tobu.TobuSkytree":{inbound:"浅草",outbound:"東武動物公園"},"odpt.Railway:JR-East.ChuoSobuLocal":{inbound:"三鷹",outbound:"千葉"},"odpt.Railway:Fujikyu.Fujikyu":{inbound:"大月",outbound:"河口湖"},"odpt.Railway:Keikyu.Airport":{inbound:"品川",outbound:"羽田空港"},"odpt.Railway:Keikyu.Daishi":{inbound:"京急川崎",outbound:"小島新田"},"odpt.Railway:Tokyu.DenEnToshi":{inbound:"渋谷",outbound:"中央林間"},"odpt.Railway:Tokyu.Ikegami":{inbound:"五反田",outbound:"蒲田"},"odpt.Railway:Tobu.Daishi":{inbound:"西新井",outbound:"大師前"},"odpt.Railway:Tobu.Isesaki":{inbound:"東武動物公園",outbound:"伊勢崎"},"odpt.Railway:Tobu.Kiryu":{inbound:"太田",outbound:"赤城"},"odpt.Railway:ChibaMonorail.Line2":{inbound:"千葉",outbound:"千城台"},"odpt.Railway:JR-East.Chuo":{inbound:"東京",outbound:"高尾"},"odpt.Railway:JR-East.Joban":{inbound:"上野",outbound:"水戸"},"odpt.Railway:Seibu.Toshima":{inbound:"練馬",outbound:"豊島園"},"odpt.Railway:Sotetsu.Izumino":{inbound:"二俣川",outbound:"湘南台"},"odpt.Railway:Sotetsu.Main":{inbound:"横浜",outbound:"海老名"},"odpt.Railway:Sotetsu.SotetsuShinYokohama":{inbound:"新横浜",outbound:"西谷"},"odpt.Railway:JR-Central.TokaidoShinkansen":{inbound:"東京",outbound:"新大阪"},"odpt.Railway:Odakyu.Enoshima":{inbound:"相模大野",outbound:"片瀬江ノ島"},"odpt.Railway:Odakyu.Tama":{inbound:"新百合ヶ丘",outbound:"唐木田"},"odpt.Railway:Keikyu.Kurihama":{inbound:"堀ノ内",outbound:"三崎口"},"odpt.Railway:Tokyu.Setagaya":{inbound:"三軒茶屋",outbound:"下高井戸"},"odpt.Railway:Keikyu.Zushi":{inbound:"金沢八景",outbound:"逗子・葉山"},"odpt.Railway:Seibu.Haijima":{inbound:"西武新宿",outbound:"拝島"},"odpt.Railway:Seibu.Ikebukuro":{inbound:"池袋",outbound:"飯能"},"odpt.Railway:Chichibu.Chichibu":{inbound:"羽生",outbound:"三峰口"},"odpt.Railway:Seibu.Kokubunji":{inbound:"国分寺",outbound:"東村山"},"odpt.Railway:Seibu.Sayama":{inbound:"西所沢",outbound:"西武球場前"},"odpt.Railway:Isumi.Isumi":{inbound:"大原",outbound:"上総中野"},"odpt.Railway:Seibu.SeibuChichibu":{inbound:"吾野",outbound:"西武秩父"},"odpt.Railway:Seibu.SeibuYurakucho":{inbound:"練馬",outbound:"小竹向原"},"odpt.Railway:Seibu.Seibuen":{inbound:"東村山",outbound:"西武園"},"odpt.Railway:Seibu.Shinjuku":{inbound:"西武新宿",outbound:"本川越"},"odpt.Railway:Seibu.Tamagawa":{inbound:"武蔵境",outbound:"是政"},"odpt.Railway:Seibu.Tamako":{inbound:"国分寺",outbound:"西武遊園地"},"odpt.Railway:Seibu.Yamaguchi":{inbound:"西武球場前",outbound:"西武遊園地"},"odpt.Railway:Tokyu.Kodomonokuni":{inbound:"長津田",outbound:"こどもの国"},"odpt.Railway:Tokyu.Meguro":{inbound:"目黒",outbound:"日吉"},"odpt.Railway:Tokyu.Oimachi":{inbound:"大井町",outbound:"溝の口"},"odpt.Railway:Tokyu.TokyuShinYokohama":{inbound:"新横浜",outbound:"西谷"},"odpt.Railway:JR-Central.Gotemba":{inbound:"国府津",outbound:"沼津"},"odpt.Railway:JR-Central.Minobu":{inbound:"富士",outbound:"甲府"},"odpt.Railway:Tokyu.TokyuTamagawa":{inbound:"多摩川",outbound:"蒲田"},"odpt.Railway:Choshi.Choshi":{inbound:"銚子",outbound:"外川"},"odpt.Railway:Tokyu.Toyoko":{inbound:"渋谷",outbound:"横浜"},"odpt.Railway:Tobu.Kameido":{inbound:"曳舟",outbound:"亀戸"},"odpt.Railway:Tobu.Kinugawa":{inbound:"下今市",outbound:"新藤原"},"odpt.Railway:IzuHakone.Sunzu":{inbound:"三島",outbound:"修善寺"},"odpt.Railway:Tobu.KoizumiBranch":{inbound:"館林",outbound:"西小泉"},"odpt.Railway:Tobu.Koizumi":{inbound:"太田",outbound:"西小泉"},"odpt.Railway:Enoden.Enoden":{inbound:"鎌倉",outbound:"藤沢"},"odpt.Railway:Tobu.Ogose":{inbound:"坂戸",outbound:"越生"},"odpt.Railway:Tobu.Sano":{inbound:"館林",outbound:"葛生"},"odpt.Railway:Izukyu.Izukyu":{inbound:"伊東",outbound:"伊豆急下田"},"odpt.Railway:JR-Central.Chuo":{inbound:"名古屋",outbound:"中津川"},"odpt.Railway:Tobu.TobuSkytreeBranch":{inbound:"曳舟",outbound:"亀戸"},"odpt.Railway:Tobu.TobuUrbanPark":{inbound:"大宮",outbound:"船橋"},"odpt.Railway:Tobu.Tojo":{inbound:"池袋",outbound:"寄居"},"odpt.Railway:Tobu.Utsunomiya":{inbound:"新栃木",outbound:"東武宇都宮"},"odpt.Railway:Aizu.Aizu":{inbound:"西若松",outbound:"会津高原"},"odpt.Railway:ChibaMonorail.Line1":{inbound:"千葉みなと",outbound:"県庁前"},"odpt.Railway:Hitachinaka.Minato":{inbound:"勝田",outbound:"阿字ヶ浦"},"odpt.Railway:Hokuetsu.Hokuhoku":{inbound:"六日町",outbound:"犀潟"},"odpt.Railway:Hokuso.Hokuso":{inbound:"京成高砂",outbound:"印旛日本医大"},"odpt.Railway:IzuHakone.Daiyuzan":{inbound:"小田原",outbound:"大雄山"},"odpt.Railway:JR-Central.Tokaido":{inbound:"東京",outbound:"熱海"},"odpt.Railway:JR-East.AkitaShinkansen":{inbound:"東京",outbound:"秋田"},"odpt.Railway:JR-East.Aterazawa":{inbound:"山形",outbound:"左沢"},"odpt.Railway:JR-East.BanetsuEast":{inbound:"郡山",outbound:"いわき"},"odpt.Railway:JR-East.BanetsuWest":{inbound:"郡山",outbound:"新潟"},"odpt.Railway:JR-East.Kitakami":{inbound:"北上",outbound:"横手"},"odpt.Railway:JR-East.ChuoTatsunoBranch":{inbound:"岡谷",outbound:"辰野"},"odpt.Railway:JR-East.Echigo":{inbound:"新潟",outbound:"柏崎"},"odpt.Railway:JR-East.Gono":{inbound:"東能代",outbound:"川部"},"odpt.Railway:JR-East.Hachinohe":{inbound:"八戸",outbound:"久慈"},"odpt.Railway:JR-East.Hakushin":{inbound:"新潟",outbound:"新発田"},"odpt.Railway:JR-East.Hanawa":{inbound:"大館",outbound:"好摩"},"odpt.Railway:JR-East.HokurikuShinkansen":{inbound:"東京",outbound:"金沢"},"odpt.Railway:JR-East.Iiyama":{inbound:"豊野",outbound:"越後川口"},"odpt.Railway:JR-East.Ishinomaki":{inbound:"小牛田",outbound:"女川"},"odpt.Railway:JR-East.JoetsuShinkansen":{inbound:"東京",outbound:"新潟"},"odpt.Railway:JR-East.Kamaishi":{inbound:"花巻",outbound:"釜石"},"odpt.Railway:JR-East.Karasuyama":{inbound:"宝積寺",outbound:"烏山"},"odpt.Railway:JR-East.Kesennuma":{inbound:"前谷地",outbound:"気仙沼"},"odpt.Railway:JR-East.Koumi":{inbound:"小淵沢",outbound:"小諸"},"odpt.Railway:JR-East.Mito":{inbound:"小山",outbound:"水戸"},"odpt.Railway:JR-East.Nikko":{inbound:"宇都宮",outbound:"日光"},"odpt.Railway:JR-East.Ofunato":{inbound:"一ノ関",outbound:"盛"},"odpt.Railway:JR-East.Oga":{inbound:"追分",outbound:"男鹿"},"odpt.Railway:JR-East.Oito":{inbound:"松本",outbound:"南小谷"},"odpt.Railway:JR-East.Ominato":{inbound:"野辺地",outbound:"大湊"},"odpt.Railway:JR-East.OuYamagata":{inbound:"福島",outbound:"新庄"},"odpt.Railway:JR-East.Ou":{inbound:"福島",outbound:"青森"},"odpt.Railway:JR-East.RikuEast":{inbound:"小牛田",outbound:"新庄"},"odpt.Railway:JR-East.RikuWest":{inbound:"新庄",outbound:"余目"},"odpt.Railway:JR-East.Ryomo":{inbound:"小山",outbound:"新前橋"},"odpt.Railway:JR-East.SensekiTohoku":{inbound:"仙台",outbound:"石巻"},"odpt.Railway:JR-East.Senseki":{inbound:"仙台",outbound:"石巻"},"odpt.Railway:JR-East.Senzan":{inbound:"仙台",outbound:"羽前千歳"},"odpt.Railway:JR-East.Shinetsu":{inbound:"高崎",outbound:"新潟"},"odpt.Railway:JR-East.Shinonoi":{inbound:"塩尻",outbound:"篠ノ井"},"odpt.Railway:JR-East.SuigunBranch":{inbound:"郡山",outbound:"水戸"},"odpt.Railway:JR-East.Suigun":{inbound:"水戸",outbound:"郡山"},"odpt.Railway:JR-East.Tadami":{inbound:"会津若松",outbound:"小出"},"odpt.Railway:JR-East.Tazawako":{inbound:"盛岡",outbound:"大曲"},"odpt.Railway:JR-East.TohokuShinkansen":{inbound:"東京",outbound:"新青森"},"odpt.Railway:JR-East.Tohoku":{inbound:"東京",outbound:"一ノ関"},"odpt.Railway:JR-East.Tsugaru":{inbound:"青森",outbound:"三厩"},"odpt.Railway:JR-East.Uetsu":{inbound:"新津",outbound:"秋田"},"odpt.Railway:JR-East.Yahiko":{inbound:"東三条",outbound:"弥彦"},"odpt.Railway:JR-East.Yamada":{inbound:"盛岡",outbound:"宮古"},"odpt.Railway:JR-East.YamagataShinkansen":{inbound:"東京",outbound:"新庄"},"odpt.Railway:JR-East.Yonesaka":{inbound:"米沢",outbound:"坂町"},"odpt.Railway:JR-Shikoku.SetoOhashi":{inbound:"岡山",outbound:"高松"},"odpt.Railway:JR-West.Sanin":{inbound:"京都",outbound:"幡生"},"odpt.Railway:Jomo.Jomo":{inbound:"高崎",outbound:"西桐生"},"odpt.Railway:Joshin.Joshin":{inbound:"高崎",outbound:"下仁田"},"odpt.Railway:KantoRailway.Ryugasaki":{inbound:"佐貫",outbound:"竜ヶ崎"},"odpt.Railway:KashimaRinkai.OaraiKashima":{inbound:"水戸",outbound:"鹿島神宮"},"odpt.Railway:Keisei.Chiba":{inbound:"京成津田沼",outbound:"千葉中央"},"odpt.Railway:Keisei.HigashiNarita":{inbound:"京成成田",outbound:"東成田"},"odpt.Railway:Keisei.Kanamachi":{inbound:"京成高砂",outbound:"金町"},"odpt.Railway:Keisei.Main":{inbound:"京成上野",outbound:"成田空港"},"odpt.Railway:Keisei.NaritaSkyAccess":{inbound:"京成上野",outbound:"成田空港"},"odpt.Railway:Keisei.Oshiage":{inbound:"押上",outbound:"京成高砂"},"odpt.Railway:Kominato.Kominato":{inbound:"五井",outbound:"上総中野"},"odpt.Railway:TokyoMetro.Hanzomon":{inbound:"渋谷",outbound:"押上"},"odpt.Railway:MIR.TsukubaExpress":{inbound:"秋葉原",outbound:"つくば"},"odpt.Railway:MaihamaResort.DisneyResort":{inbound:"リゾートゲートウェイ",outbound:"東京ディズニーランド"},"odpt.Railway:Minatomirai.Minatomirai":{inbound:"横浜",outbound:"元町・中華街"},"odpt.Railway:OdakyuHakone.HakoneTozan":{inbound:"小田原",outbound:"強羅"},"odpt.Railway:Ryutetsu.Nagareyama":{inbound:"馬橋",outbound:"流山"},"odpt.Railway:SaitamaRailway.SaitamaRailway":{inbound:"赤羽岩淵",outbound:"浦和美園"},"odpt.Railway:SaitamaTransit.NewShuttle":{inbound:"大宮",outbound:"内宿"},"odpt.Railway:SendaiAirportTransit.SendaiAirport":{inbound:"仙台",outbound:"仙台空港"},"odpt.Railway:SendaiMunicipal.Namboku":{inbound:"泉中央",outbound:"富沢"},"odpt.Railway:SendaiMunicipal.Tozai":{inbound:"八木山動物公園",outbound:"荒井"},"odpt.Railway:Shibayama.Shibayama":{inbound:"東成田",outbound:"芝山千代田"},"odpt.Railway:ShinKeisei.ShinKeisei":{inbound:"松戸",outbound:"京成津田沼"},"odpt.Railway:ShonanMonorail.ShonanMonorail":{inbound:"大船",outbound:"湘南江の島"},"odpt.Railway:TWR.Rinkai":{inbound:"大崎",outbound:"新木場"},"odpt.Railway:TamaMonorail.TamaMonorail":{inbound:"上北台",outbound:"多摩センター"},"odpt.Railway:Toei.Arakawa":{inbound:"早稲田",outbound:"三ノ輪橋"},"odpt.Railway:Toei.Asakusa":{inbound:"西馬込",outbound:"押上"},"odpt.Railway:Toei.Mita":{inbound:"目黒",outbound:"西高島平"},"odpt.Railway:Toei.NipporiToneri":{inbound:"日暮里",outbound:"見沼代親水公園"},"odpt.Railway:Toei.Oedo":{inbound:"光が丘",outbound:"大門"},"odpt.Railway:Toei.Shinjuku":{inbound:"新宿",outbound:"本八幡"},"odpt.Railway:TokyoMetro.Chiyoda":{inbound:"代々木上原",outbound:"取手"},"odpt.Railway:TokyoMetro.Fukutoshin":{inbound:"渋谷",outbound:"和光市"},"odpt.Railway:TokyoMetro.Ginza":{inbound:"渋谷",outbound:"浅草"},"odpt.Railway:TokyoMetro.Hibiya":{inbound:"中目黒",outbound:"北千住"},"odpt.Railway:TokyoMetro.Marunouchi":{inbound:"荻窪",outbound:"池袋"},"odpt.Railway:TokyoMetro.Namboku":{inbound:"目黒",outbound:"赤羽岩淵"},"odpt.Railway:TokyoMetro.Tozai":{inbound:"中野",outbound:"西船橋"},"odpt.Railway:TokyoMetro.Yurakucho":{inbound:"新木場",outbound:"和光市"},"odpt.Railway:TokyoMonorail.HanedaAirport":{inbound:"浜松町",outbound:"羽田空港"},"odpt.Railway:UtsunomiyaLightRail.UtsunomiyaLightRail":{inbound:"宇都宮駅東口",outbound:"芳賀・高根沢工業団地"},"odpt.Railway:WataraseKeikoku.WataraseKeikoku":{inbound:"桐生",outbound:"間藤"},"odpt.Railway:Yagan.AizuKinugawa":{inbound:"新藤原",outbound:"会津高原"},"odpt.Railway:YokohamaMunicipal.Blue":{inbound:"湘南台",outbound:"あざみ野"},"odpt.Railway:YokohamaMunicipal.Green":{inbound:"中山",outbound:"日吉"},"odpt.Railway:YokohamaSeaside.KanazawaSeaside":{inbound:"新杉田",outbound:"金沢八景"},"odpt.Railway:Yurikamome.Yurikamome":{inbound:"新橋",outbound:"豊洲"},"odpt.Railway:Keio.Inokashira":{inbound:"渋谷",outbound:"吉祥寺"},"odpt.Railway:Keio.KeioNew":{inbound:"新宿",outbound:"笹塚"},"odpt.Railway:Keio.Keio":{inbound:"新宿",outbound:"京王八王子"},"odpt.Railway:Keio.Sagamihara":{inbound:"調布",outbound:"橋本"},"odpt.Railway:KantoRailway.Joso":{inbound:"取手",outbound:"下館"},"odpt.Railway:Keio.Takao":{inbound:"北野",outbound:"高尾山口"},"odpt.Railway:ToyoRapid.ToyoRapid":{inbound:"西船橋",outbound:"東葉勝田台"},"odpt.Railway:JR-East.Agatsuma":{inbound:"渋川",outbound:"大前"},"odpt.Railway:JR-East.ChuoRapid":{inbound:"東京",outbound:"高尾"},"odpt.Railway:JR-East.Hachiko":{inbound:"八王子",outbound:"高崎"},"odpt.Railway:JR-East.Ito":{inbound:"熱海",outbound:"伊東"},"odpt.Railway:JR-East.Kawagoe":{inbound:"大宮",outbound:"高麗川"},"odpt.Railway:JR-East.Itsukaichi":{inbound:"拝島",outbound:"武蔵五日市"},"odpt.Railway:JR-East.JobanLocal":{inbound:"代々木上原",outbound:"取手"},"odpt.Railway:JR-East.JobanRapid":{inbound:"上野",outbound:"取手"},"odpt.Railway:JR-East.Joetsu":{inbound:"高崎",outbound:"長岡"},"odpt.Railway:JR-East.Kashima":{inbound:"香取",outbound:"鹿島神宮"},"odpt.Railway:JR-East.KeihinTohokuNegishi":{inbound:"大宮",outbound:"大船"},"odpt.Railway:JR-East.Keiyo":{inbound:"東京",outbound:"蘇我"},"odpt.Railway:JR-East.Kururi":{inbound:"木更津",outbound:"上総亀山"},"odpt.Railway:JR-East.Narita":{inbound:"佐倉",outbound:"銚子"},"odpt.Railway:JR-East.Musashino":{inbound:"府中本町",outbound:"西船橋"},"odpt.Railway:JR-East.NambuBranch":{inbound:"尻手",outbound:"浜川崎"},"odpt.Railway:JR-East.Nambu":{inbound:"川崎",outbound:"立川"},"odpt.Railway:JR-East.NaritaAbikoBranch":{inbound:"我孫子",outbound:"成田"},"odpt.Railway:JR-East.NaritaAirportBranch":{inbound:"成田",outbound:"成田空港"},"odpt.Railway:JR-East.Ome":{inbound:"立川",outbound:"奥多摩"},"odpt.Railway:JR-East.Sagami":{inbound:"茅ヶ崎",outbound:"橋本"},"odpt.Railway:JR-East.SaikyoKawagoe":{inbound:"大崎",outbound:"川越"},"odpt.Railway:JR-East.ShonanShinjuku":{inbound:"大宮",outbound:"大船"},"odpt.Railway:JR-East.SobuRapid":{inbound:"東京",outbound:"千葉"},"odpt.Railway:JR-East.Sobu":{inbound:"千葉",outbound:"銚子"},"odpt.Railway:JR-East.SotetsuDirect":{inbound:"新宿",outbound:"海老名"},"odpt.Railway:JR-East.Sotobo":{inbound:"千葉",outbound:"安房鴨川"},"odpt.Railway:JR-East.Takasaki":{inbound:"上野",outbound:"高崎"},"odpt.Railway:JR-East.Togane":{inbound:"成東",outbound:"大網"},"odpt.Railway:JR-East.Tokaido":{inbound:"東京",outbound:"熱海"},"odpt.Railway:JR-East.TsurumiOkawaBranch":{inbound:"浅野",outbound:"大川"},"odpt.Railway:JR-East.TsurumiUmiShibauraBranch":{inbound:"浅野",outbound:"海芝浦"},"odpt.Railway:JR-East.Tsurumi":{inbound:"鶴見",outbound:"扇町"},"odpt.Railway:JR-East.Uchibo":{inbound:"蘇我",outbound:"安房鴨川"},"odpt.Railway:JR-East.Utsunomiya":{inbound:"上野",outbound:"黒磯"},"odpt.Railway:JR-East.Yamanote":{inbound:"内回り",outbound:"外回り"},"odpt.Railway:JR-East.Yokohama":{inbound:"東神奈川",outbound:"八王子"},"odpt.Railway:JR-East.Yokosuka":{inbound:"東京",outbound:"久里浜"}};let Kt=[],A=null,H=null,D=null,et="渋谷・副都心線方面",ut="横浜・元町中華街方面";const O=Xt,Y={},P=new Map;let Mt=[];const M=new qt(500);function Qt(){return H||"odpt.RailDirection:Inbound"}function to(){return D||"odpt.RailDirection:Outbound"}function oo(){try{const t=A?A["owl:sameAs"]||A["@id"]:null;if(t&&O[t]&&O[t].inbound)return O[t].inbound}catch{}return et}function ao(){try{const t=A?A["owl:sameAs"]||A["@id"]:null;if(t&&O[t]&&O[t].outbound)return O[t].outbound}catch{}return ut}function pt(){return Kt}function io(t){Kt=t}function I(){return Mt}async function no(t,o){try{const a=await $t(t,o);for(const i of a){const e=i["owl:sameAs"]||i["@id"],n=U(i["dc:title"]);e&&typeof e=="string"&&P.set(e,n)}}catch(a){console.warn("Failed to load direction names:",a)}}async function eo(t,o){try{const a=await jt(t,o);for(const i of a){const e=i["owl:sameAs"]||i["@id"];if(!e||typeof e!="string")continue;const n=U(i["dc:title"]);if(!n)continue;const u=Zt(e);Y[e]={name:n,class:u}}console.log(`Loaded ${Object.keys(Y).length} train types`)}catch(a){console.warn("Failed to load train types:",a)}}async function $(t,o,a){try{const i=await Yt(t,o,a);if(!i){console.warn("Railway not found:",t);return}A=i,H=i["odpt:descendingRailDirection"]||"odpt.RailDirection:Inbound",D=i["odpt:ascendingRailDirection"]||"odpt.RailDirection:Outbound",H&&P.has(H)&&(et=P.get(H)||et),D&&P.has(D)&&(ut=P.get(D)||ut),Mt=(i["odpt:stationOrder"]||[]).map(u=>{const d=u["odpt:station"]||"",s=u["odpt:stationTitle"],l=U(s),c=u["odpt:index"]||-1;return{name:l,uri:d,index:c}}).filter(u=>u.uri&&u.name!=="N/A").sort((u,d)=>u.index-d.index);const n=U(i["dc:title"]||i["odpt:railwayTitle"]);ua(`${n} 発車案内板`)}catch(i){console.warn("Failed to load railway metadata:",i)}}async function uo(t,o,...a){const i=zt(...a),e=Array.from(i).filter(n=>!M.has(n));if(e.length!==0)try{const n=await Dt(e,t,o);for(const u of n){const d=u["owl:sameAs"]||u["@id"]||u.id,s=U(u["dc:title"]||u["odpt:stationTitle"]||u.title);d&&typeof d=="string"&&M.set(d,s)}for(const u of e)M.has(u)||M.set(u,u)}catch(n){console.warn("Failed to fetch station names for destinations:",n)}}const V={東京都:["odpt.Railway:Odakyu.Odawara","odpt.Railway:Keikyu.Main","odpt.Railway:Tobu.TobuSkytree","odpt.Railway:JR-East.ChuoSobuLocal","odpt.Railway:Keikyu.Airport","odpt.Railway:Tokyu.DenEnToshi","odpt.Railway:Tokyu.Ikegami","odpt.Railway:Tobu.Daishi","odpt.Railway:JR-East.Chuo","odpt.Railway:JR-East.Joban","odpt.Railway:Seibu.Toshima","odpt.Railway:Odakyu.Tama","odpt.Railway:Tokyu.Setagaya","odpt.Railway:Seibu.Haijima","odpt.Railway:Seibu.Ikebukuro","odpt.Railway:Seibu.Kokubunji","odpt.Railway:Seibu.SeibuYurakucho","odpt.Railway:Seibu.Seibuen","odpt.Railway:Seibu.Shinjuku","odpt.Railway:Seibu.Tamagawa","odpt.Railway:Seibu.Tamako","odpt.Railway:Seibu.Yamaguchi","odpt.Railway:Tokyu.Kodomonokuni","odpt.Railway:Tokyu.Meguro","odpt.Railway:Tokyu.Oimachi","odpt.Railway:Tokyu.TokyuShinYokohama","odpt.Railway:Tokyu.TokyuTamagawa","odpt.Railway:Tokyu.Toyoko","odpt.Railway:Tobu.Kameido","odpt.Railway:Tobu.TobuSkytreeBranch","odpt.Railway:Hokuso.Hokuso","odpt.Railway:JR-East.HokurikuShinkansen","odpt.Railway:JR-East.JoetsuShinkansen","odpt.Railway:JR-East.TohokuShinkansen","odpt.Railway:JR-East.Ou","odpt.Railway:Keisei.Main","odpt.Railway:Keisei.NaritaSkyAccess","odpt.Railway:Keisei.Oshiage","odpt.Railway:TokyoMetro.Hanzomon","odpt.Railway:MIR.TsukubaExpress","odpt.Railway:TokyoMonorail.HanedaAirport","odpt.Railway:TWR.Rinkai","odpt.Railway:TamaMonorail.TamaMonorail","odpt.Railway:Toei.Arakawa","odpt.Railway:Toei.Asakusa","odpt.Railway:Toei.Mita","odpt.Railway:Toei.NipporiToneri","odpt.Railway:Toei.Oedo","odpt.Railway:Toei.Shinjuku","odpt.Railway:TokyoMetro.Chiyoda","odpt.Railway:TokyoMetro.Fukutoshin","odpt.Railway:TokyoMetro.Ginza","odpt.Railway:TokyoMetro.Hibiya","odpt.Railway:TokyoMetro.Marunouchi","odpt.Railway:TokyoMetro.Namboku","odpt.Railway:TokyoMetro.Tozai","odpt.Railway:TokyoMetro.Yurakucho","odpt.Railway:Yurikamome.Yurikamome","odpt.Railway:Keio.Inokashira","odpt.Railway:Keio.KeioNew","odpt.Railway:Keio.Keio","odpt.Railway:Keio.Sagamihara","odpt.Railway:Keio.Takao","odpt.Railway:JR-East.ChuoRapid","odpt.Railway:JR-East.Hachiko","odpt.Railway:JR-East.Kawagoe","odpt.Railway:JR-East.Itsukaichi","odpt.Railway:JR-East.JobanLocal","odpt.Railway:JR-East.JobanRapid","odpt.Railway:JR-East.KeihinTohokuNegishi","odpt.Railway:JR-East.Keiyo","odpt.Railway:JR-East.Musashino","odpt.Railway:JR-East.Nambu","odpt.Railway:JR-East.Ome","odpt.Railway:JR-East.SaikyoKawagoe","odpt.Railway:JR-East.ShonanShinjuku","odpt.Railway:JR-East.SobuRapid","odpt.Railway:JR-East.SotetsuDirect","odpt.Railway:JR-East.Tokaido","odpt.Railway:JR-East.Utsunomiya","odpt.Railway:JR-East.Yamanote","odpt.Railway:JR-East.Yokohama","odpt.Railway:JR-East.Yokosuka"],神奈川県:["odpt.Railway:Odakyu.Odawara","odpt.Railway:Keikyu.Main","odpt.Railway:Keikyu.Airport","odpt.Railway:Keikyu.Daishi","odpt.Railway:Tokyu.DenEnToshi","odpt.Railway:Tokyu.Ikegami","odpt.Railway:Sotetsu.Izumino","odpt.Railway:Sotetsu.Main","odpt.Railway:Sotetsu.SotetsuShinYokohama","odpt.Railway:JR-Central.TokaidoShinkansen","odpt.Railway:Odakyu.Enoshima","odpt.Railway:Odakyu.Tama","odpt.Railway:Keikyu.Kurihama","odpt.Railway:Keikyu.Zushi","odpt.Railway:Tokyu.Kodomonokuni","odpt.Railway:Tokyu.Meguro","odpt.Railway:Tokyu.Oimachi","odpt.Railway:Tokyu.TokyuShinYokohama","odpt.Railway:Tokyu.TokyuTamagawa","odpt.Railway:Choshi.Choshi","odpt.Railway:Tokyu.Toyoko","odpt.Railway:Enoden.Enoden","odpt.Railway:JR-Central.Tokaido","odpt.Railway:Minatomirai.Minatomirai","odpt.Railway:OdakyuHakone.HakoneTozan","odpt.Railway:ShonanMonorail.ShonanMonorail","odpt.Railway:JR-East.Tokaido","odpt.Railway:JR-East.KeihinTohokuNegishi","odpt.Railway:JR-East.NambuBranch","odpt.Railway:JR-East.Nambu","odpt.Railway:JR-East.Sagami","odpt.Railway:JR-East.ShonanShinjuku","odpt.Railway:JR-East.SotetsuDirect","odpt.Railway:JR-East.TsurumiOkawaBranch","odpt.Railway:JR-East.TsurumiUmiShibauraBranch","odpt.Railway:JR-East.Tsurumi","odpt.Railway:JR-East.Yokohama","odpt.Railway:JR-East.Yokosuka","odpt.Railway:YokohamaMunicipal.Blue","odpt.Railway:YokohamaMunicipal.Green","odpt.Railway:YokohamaSeaside.KanazawaSeaside"],千葉県:["odpt.Railway:JR-East.ChuoSobuLocal","odpt.Railway:ChibaMonorail.Line2","odpt.Railway:Tobu.TobuUrbanPark","odpt.Railway:Isumi.Isumi","odpt.Railway:Choshi.Choshi","odpt.Railway:Tobu.TobuUrbanPark","odpt.Railway:ChibaMonorail.Line1","odpt.Railway:Hokuso.Hokuso","odpt.Railway:Keisei.Chiba","odpt.Railway:Keisei.HigashiNarita","odpt.Railway:Keisei.Kanamachi","odpt.Railway:Keisei.Main","odpt.Railway:Keisei.NaritaSkyAccess","odpt.Railway:Keisei.Oshiage","odpt.Railway:Kominato.Kominato","odpt.Railway:MIR.TsukubaExpress","odpt.Railway:MaihamaResort.DisneyResort","odpt.Railway:Ryutetsu.Nagareyama","odpt.Railway:Shibayama.Shibayama","odpt.Railway:ShinKeisei.ShinKeisei","odpt.Railway:TWR.Rinkai","odpt.Railway:Toei.Shinjuku","odpt.Railway:TokyoMetro.Tozai","odpt.Railway:TokyoMetro.Yurakucho","odpt.Railway:ToyoRapid.ToyoRapid","odpt.Railway:JR-East.Keiyo","odpt.Railway:JR-East.Kashima","odpt.Railway:JR-East.Kururi","odpt.Railway:JR-East.Narita","odpt.Railway:JR-East.Musashino","odpt.Railway:JR-East.NaritaAbikoBranch","odpt.Railway:JR-East.NaritaAirportBranch","odpt.Railway:JR-East.SobuRapid","odpt.Railway:JR-East.Sobu","odpt.Railway:JR-East.Sotobo","odpt.Railway:JR-East.Togane","odpt.Railway:JR-East.Uchibo"],埼玉県:["odpt.Railway:Tobu.TobuSkytree","odpt.Railway:Tobu.Daishi","odpt.Railway:Tobu.TobuUrbanPark","odpt.Railway:Tobu.Tojo","odpt.Railway:Tobu.Ogose","odpt.Railway:Chichibu.Chichibu","odpt.Railway:Seibu.Haijima","odpt.Railway:Seibu.Ikebukuro","odpt.Railway:Seibu.Sayama","odpt.Railway:Seibu.SeibuChichibu","odpt.Railway:Seibu.SeibuYurakucho","odpt.Railway:MIR.TsukubaExpress","odpt.Railway:SaitamaRailway.SaitamaRailway","odpt.Railway:SaitamaTransit.NewShuttle","odpt.Railway:TokyoMetro.Fukutoshin","odpt.Railway:TokyoMetro.Namboku","odpt.Railway:TokyoMetro.Yurakucho","odpt.Railway:JR-East.Kawagoe","odpt.Railway:JR-East.Hachiko","odpt.Railway:JR-East.KeihinTohokuNegishi","odpt.Railway:JR-East.Musashino","odpt.Railway:JR-East.SaikyoKawagoe","odpt.Railway:JR-East.ShonanShinjuku","odpt.Railway:JR-East.Takasaki","odpt.Railway:JR-East.Utsunomiya"],群馬県:["odpt.Railway:Tobu.Kiryu","odpt.Railway:Tobu.Isesaki","odpt.Railway:Tobu.KoizumiBranch","odpt.Railway:Tobu.Koizumi","odpt.Railway:Jomo.Jomo","odpt.Railway:Joshin.Joshin","odpt.Railway:WataraseKeikoku.WataraseKeikoku","odpt.Railway:JR-East.Agatsuma","odpt.Railway:JR-East.Hachiko","odpt.Railway:JR-East.Joetsu","odpt.Railway:JR-East.Ryomo","odpt.Railway:JR-East.Takasaki"],栃木県:["odpt.Railway:Tobu.Nikko","odpt.Railway:Tobu.Kinugawa","odpt.Railway:Tobu.Sano","odpt.Railway:Tobu.Utsunomiya","odpt.Railway:Yagan.AizuKinugawa","odpt.Railway:JR-East.Nikko","odpt.Railway:JR-East.Ryomo","odpt.Railway:JR-East.Utsunomiya","odpt.Railway:JR-East.Karasuyama","odpt.Railway:JR-East.Mito","odpt.Railway:JR-East.Tohoku","odpt.Railway:UtsunomiyaLightRail.UtsunomiyaLightRail"],茨城県:["odpt.Railway:JR-East.Joban","odpt.Railway:JR-East.Mito","odpt.Railway:JR-East.SuigunBranch","odpt.Railway:JR-East.Suigun","odpt.Railway:Hitachinaka.Minato","odpt.Railway:KantoRailway.Ryugasaki","odpt.Railway:KantoRailway.Joso","odpt.Railway:KashimaRinkai.OaraiKashima","odpt.Railway:MIR.TsukubaExpress","odpt.Railway:TokyoMetro.Chiyoda","odpt.Railway:JR-East.JobanLocal","odpt.Railway:JR-East.JobanRapid","odpt.Railway:JR-East.Kashima"],山梨県:["odpt.Railway:Fujikyu.Fujikyu","odpt.Railway:JR-Central.Minobu","odpt.Railway:JR-East.Chuo","odpt.Railway:JR-East.ChuoRapid","odpt.Railway:JR-East.Koumi","odpt.Railway:JR-East.Oito"],静岡県:["odpt.Railway:JR-Central.TokaidoShinkansen","odpt.Railway:JR-Central.Gotemba","odpt.Railway:JR-Central.Minobu","odpt.Railway:JR-Central.Tokaido","odpt.Railway:IzuHakone.Sunzu","odpt.Railway:IzuHakone.Daiyuzan","odpt.Railway:Izukyu.Izukyu","odpt.Railway:JR-East.Ito"],宮城県:["odpt.Railway:JR-East.TohokuShinkansen","odpt.Railway:JR-East.Tohoku","odpt.Railway:JR-East.SensekiTohoku","odpt.Railway:JR-East.Senseki","odpt.Railway:JR-East.Senzan","odpt.Railway:JR-East.Ishinomaki","odpt.Railway:SendaiAirportTransit.SendaiAirport","odpt.Railway:SendaiMunicipal.Namboku","odpt.Railway:SendaiMunicipal.Tozai"],福島県:["odpt.Railway:Aizu.Aizu","odpt.Railway:JR-East.TohokuShinkansen","odpt.Railway:JR-East.YamagataShinkansen","odpt.Railway:JR-East.Tohoku","odpt.Railway:JR-East.OuYamagata","odpt.Railway:JR-East.Ou","odpt.Railway:JR-East.BanetsuEast","odpt.Railway:JR-East.BanetsuWest","odpt.Railway:JR-East.Tadami","odpt.Railway:JR-East.SuigunBranch"],新潟県:["odpt.Railway:JR-East.JoetsuShinkansen","odpt.Railway:JR-East.HokurikuShinkansen","odpt.Railway:JR-East.Joetsu","odpt.Railway:JR-East.Shinetsu","odpt.Railway:JR-East.Uetsu","odpt.Railway:JR-East.Echigo","odpt.Railway:JR-East.Hakushin","odpt.Railway:JR-East.Iiyama","odpt.Railway:JR-East.Yahiko","odpt.Railway:JR-East.Yonesaka","odpt.Railway:Hokuetsu.Hokuhoku"],長野県:["odpt.Railway:JR-East.HokurikuShinkansen","odpt.Railway:JR-East.Chuo","odpt.Railway:JR-East.ChuoTatsunoBranch","odpt.Railway:JR-East.Koumi","odpt.Railway:JR-East.Iiyama","odpt.Railway:JR-East.Oito","odpt.Railway:JR-East.Shinetsu","odpt.Railway:JR-East.Shinonoi"]},so=["北海道","青森県","岩手県","宮城県","秋田県","山形県","福島県","茨城県","栃木県","群馬県","埼玉県","千葉県","東京都","神奈川県","新潟県","富山県","石川県","福井県","山梨県","長野県","岐阜県","静岡県","愛知県","三重県","滋賀県","京都府","大阪府","兵庫県","奈良県","和歌山県","鳥取県","島根県","岡山県","広島県","山口県","徳島県","香川県","愛媛県","高知県","福岡県","佐賀県","長崎県","熊本県","大分県","宮崎県","鹿児島県","沖縄県"],lo="東京メトロ",ro="都営",co="東急",yo="小田急",po="京王",Ro="西武",bo="東武",wo="京成",mo="京急",fo="相鉄",ho="横浜市営",ko="千葉都市モノレール",To="富士急行",Eo="秩父鉄道",So="いすみ鉄道",go="銚子電気鉄道",Jo="伊豆箱根鉄道",Io="伊豆急行",xo="江ノ島電鉄",Ko="会津鉄道",Mo="ひたちなか海浜鉄道",Ao="北越急行",Lo="北総鉄道",Co="上毛電気鉄道",No="上信電鉄",vo="関東鉄道",Oo="鹿島臨海鉄道",Uo="小湊鉄道",Bo="首都圏新都市鉄道 (つくばエクスプレス)",_o="舞浜リゾートライン",Ho="横浜高速鉄道",Do="小田急箱根",Po="流鉄",Yo="埼玉高速鉄道",$o="埼玉新都市交通",jo="仙台空港鉄道",zo="仙台市営",Fo="芝山鉄道",Wo="新京成電鉄",Go="湘南モノレール",qo="東京臨海高速鉄道",Vo="多摩都市モノレール",Zo="東葉高速鉄道",Xo="宇都宮ライトレール",Qo="わたらせ渓谷鐵道",ta="野岩鉄道",oa="横浜シーサイドライン",aa="ゆりかもめ",ia={"JR-East":"JR東日本","JR-Central":"JR東海","JR-Shikoku":"JR四国","JR-West":"JR西日本",TokyoMetro:lo,Toei:ro,Tokyu:co,Odakyu:yo,Keio:po,Seibu:Ro,Tobu:bo,Keisei:wo,Keikyu:mo,Sotetsu:fo,YokohamaMunicipal:ho,ChibaMonorail:ko,Fujikyu:To,Chichibu:Eo,Isumi:So,Choshi:go,IzuHakone:Jo,Izukyu:Io,Enoden:xo,Aizu:Ko,Hitachinaka:Mo,Hokuetsu:Ao,Hokuso:Lo,Jomo:Co,Joshin:No,KantoRailway:vo,KashimaRinkai:Oo,Kominato:Uo,MIR:Bo,MaihamaResort:_o,Minatomirai:Ho,OdakyuHakone:Do,Ryutetsu:Po,SaitamaRailway:Yo,SaitamaTransit:$o,SendaiAirportTransit:jo,SendaiMunicipal:zo,Shibayama:Fo,ShinKeisei:Wo,ShonanMonorail:Go,TWR:qo,TamaMonorail:Vo,ToyoRapid:Zo,UtsunomiyaLightRail:Xo,WataraseKeikoku:Qo,Yagan:ta,YokohamaSeaside:oa,Yurikamome:aa},v=5,L="t2board_railway_uri",C="t2board_station_uri",dt="t2board_api_key",At="t2board_recent_railways",_="t2board_prefecture",na=5,ea=15e3;let Rt=!1,bt=!1,wt=!1;function ua(t){document.title=t}function da(t){const o=document.getElementById("station-header");o&&(o.textContent=t||"")}function sa(){const t=document.getElementById("departures-inbound"),o=document.getElementById("departures-outbound"),a='<p class="text-center text-2xl pt-8">時刻表を取得中...</p>';t&&(t.innerHTML=a),o&&(o.innerHTML=a)}function la(t,o){const a=document.getElementById("direction-inbound-header"),i=document.getElementById("direction-outbound-header");a&&(a.textContent=`${t}行き`),i&&(i.textContent=`${o}行き`)}function Lt(t,o){let a="N/A";const i=t["odpt:destinationStation"];if(Array.isArray(i)&&i.length>0){const e=i[0];if(typeof e=="string")a=o.get(e)||e;else if(e&&typeof e=="object"&&(a=e["dc:title"]||e.title||"N/A",(!a||a==="N/A")&&e["owl:sameAs"])){const n=e["owl:sameAs"];typeof n=="string"&&(a=o.get(n)||n)}}else typeof i=="string"&&(a=o.get(i)||i);return a}function mt(t,o,a,i){const e=document.getElementById(`departures-${t}`);if(e){if(o.length===0){e.innerHTML='<p class="text-center text-2xl pt-8">本日の発車予定はありません。</p>';return}e.innerHTML=o.map(n=>{const u=n["odpt:departureTime"]||"",d=n["odpt:trainType"]||"",s=Lt(n,a),l=i[d]||{name:"不明",class:"type-LOC"};return`
        <div class="train-row items-center justify-between" data-departure="${u}">
          <div class="minutes-col text-center" data-departure="${u}">--</div>
          <div class="time-col text-center">${u||"--"}</div>
          <div class="flex justify-center items-center">
            <span class="train-type-badge ${l.class}">${l.name}</span>
          </div>
          <div class="destination-text">${s}</div>
        </div>`}).join("")}}let Z,Ct=[],Nt=[],st=v-1,lt=v-1;function ra(t){const[o,a]=(t||"").split(":"),i=Number(o||0),e=Number(a||0);return i*3600+e*60}function ft(t,o,a,i){const e=new Date,n=e.getHours()*3600+e.getMinutes()*60+e.getSeconds(),u=(d,s)=>{const l=document.getElementById(`departures-${d}`);if(!l||!s||!a||!i){console.warn(`updateMinutesOnce: Missing required parameters for ${d}`,{container:!!l,trainCache:!!s,stationNameCache:!!a,trainTypeMap:!!i});return}const c=Array.from(l.querySelectorAll(".train-row[data-departure]")),f=d==="inbound"?Ct:Nt,w=d==="inbound"?st:lt,p=[];for(const R of c){const b=R.getAttribute("data-departure")||"",y=ra(b)-n,r=R.querySelector(".minutes-col");if(r)if(y<=0)p.push(R);else if(y<=60)r.textContent="到着";else{const h=Math.ceil(y/60);r.textContent=`${h}分`}}if(p.length>0){const R=w+1,b=s.slice(R,R+p.length);b.length>0&&(d==="inbound"?st=R+b.length-1:lt=R+b.length-1),p.forEach(k=>{const y=k.getAttribute("data-departure")||"",r=f.indexOf(y);r>-1&&f.splice(r,1),k.remove()}),b.forEach(k=>{const y=k["odpt:departureTime"];if(!y||f.includes(y))return;const r=k["odpt:trainType"]||"",h=Lt(k,a),E=i[r]||{name:"不明",class:"type-LOC"},S=`
          <div class="train-row items-center justify-between" data-departure="${y}">
            <div class="minutes-col text-center" data-departure="${y}">--</div>
            <div class="time-col text-center">${y}</div>
            <div class="flex justify-center items-center">
              <span class="train-type-badge ${E.class}">${E.name}</span>
            </div>
            <div class="destination-text">${h}</div>
          </div>`;l.insertAdjacentHTML("beforeend",S),f.push(y)})}};u("inbound",t),u("outbound",o)}function ca(t,o,a,i,e=ea){t&&(Ct=t.slice(0,v).map(n=>n["odpt:departureTime"]).filter(Boolean),st=v-1),o&&(Nt=o.slice(0,v).map(n=>n["odpt:departureTime"]).filter(Boolean),lt=v-1),ft(t,o,a,i),typeof Z<"u"&&clearInterval(Z),Z=window.setInterval(()=>ft(t,o,a,i),e)}function ht(){const t=document.getElementById("time-header");t&&(t.textContent=gt())}function kt(t,o){const a=localStorage.getItem(C),i=t.find(n=>n.name===o)||t[0];let e=i;if(a){const n=t.find(u=>u.uri===a);n&&(e=n)}else t.length>0&&(e=i||t[0]);return e}function vt(){try{const t=localStorage.getItem(At);return t?JSON.parse(t):[]}catch{return[]}}function ya(t){try{let o=vt();o=o.filter(a=>a!==t),o.unshift(t),o=o.slice(0,na),localStorage.setItem(At,JSON.stringify(o))}catch(o){console.warn("Failed to save recent railway:",o)}}function pa(t,o){const a=localStorage.getItem(L),i=t.find(n=>n.uri===o)||t[0];let e=i;if(a){const n=t.find(u=>u.uri===a);n&&(e=n)}else t.length>0&&(e=i||t[0]);return e}function Ra(t){if(!t)return"その他";const o=t.split(":"),a=o.length>1?o[1]:t;return ia[a]||a}function ba(t,o,a,i,e,n,u){const d=document.getElementById("config-modal"),s=document.getElementById("railway-select"),l=document.getElementById("station-select"),c=document.getElementById("prefecture-select");if(!d||!s||!l||!c)return;function f(b,k){if(!s)return;let y="";const r=vt();let h=null;k&&V[k]&&(h=new Set(V[k]));const E=r.map(m=>t.find(g=>g.uri===m)).filter(m=>m!==void 0).filter(m=>h?h.has(m.uri):!0);if(E.length>0){y+='<optgroup label="最近使用した路線">';for(const m of E)y+=`<option value="${m.uri}" ${m.uri===b?"selected":""}>${m.name}</option>`;y+="</optgroup>"}const S=new Map;for(const m of t){if(h&&!h.has(m.uri))continue;const g=Ra(m.operator);S.has(g)||S.set(g,[]),S.get(g).push(m)}const G=Array.from(S.keys()).sort((m,g)=>m.localeCompare(g,"ja"));for(const m of G){const g=S.get(m);y+=`<optgroup label="${m}">`;for(const q of g)y+=`<option value="${q.uri}" ${q.uri===b?"selected":""}>${q.name}</option>`;y+="</optgroup>"}s.innerHTML=y}function w(b){if(!c)return;const k=new Set(Object.keys(V)),y=so.filter(r=>k.has(r));c.innerHTML=y.map(r=>`<option value="${r}" ${r===b?"selected":""}>${r}</option>`).join("")}function p(b){if(!l)return;const k=I();l.innerHTML=k.map(y=>`<option value="${y.uri}" ${y.uri===b?"selected":""}>${y.name}</option>`).join("")}const R=localStorage.getItem(_)||"東京都";w(R),f(a,R),p(i),bt||(document.getElementById("settings-button")?.addEventListener("click",()=>{const r=localStorage.getItem(L),h=localStorage.getItem(C),E=localStorage.getItem(_)||"東京都";w(E),f(r,E),p(h),wa()}),document.getElementById("close-modal")?.addEventListener("click",()=>{X()}),s?.addEventListener("change",async()=>{if(!s)return;const r=s.value;if(l&&(l.innerHTML="<option>駅を読込中...</option>",l.disabled=!0),u)try{await u(r),p(null)}catch(h){console.error("Failed to load stations:",h),l&&(l.innerHTML="<option>駅の読込に失敗しました</option>")}finally{l&&(l.disabled=!1)}}),c?.addEventListener("change",async()=>{if(!c)return;const r=c.value;try{localStorage.setItem(_,r)}catch{}f(null,r)}),document.getElementById("save-settings")?.addEventListener("click",()=>{if(!s||!l||!c)return;const r=s.value,h=l.value,E=c.value,S=localStorage.getItem(L),G=localStorage.getItem(C),m=localStorage.getItem(_);localStorage.setItem(_,E),localStorage.setItem(L,r),localStorage.setItem(C,h),ya(r),E!==m||r!==S?e(r):h!==G&&n(h),X()}),d.addEventListener("click",r=>{r.target===d&&X()}),bt=!0)}function Tt(t,o){const a=document.getElementById("api-key-modal"),i=document.getElementById("api-key-input");if(!(!a||!i)&&(i.value=t||"",!Rt)){const e=document.getElementById("save-api-key"),n=document.getElementById("close-api-key");e?.addEventListener("click",()=>{const u=i.value?i.value.trim():null;u?localStorage.setItem(dt,u):localStorage.removeItem(dt),o(u),Q()}),n?.addEventListener("click",()=>Q()),a.addEventListener("click",u=>{u.target===a&&Q()}),Rt=!0}}function wa(){const t=document.getElementById("config-modal");t&&(t.classList.remove("hidden"),t.classList.add("flex","opacity-100"))}function X(){const t=document.getElementById("config-modal");t&&(t.classList.remove("flex","opacity-100"),t.classList.add("hidden"))}function Ot(){const t=document.getElementById("api-key-modal");t&&(t.classList.remove("hidden"),t.classList.add("flex","opacity-100"))}function Q(){const t=document.getElementById("api-key-modal");t&&(t.classList.remove("flex","opacity-100"),t.classList.add("hidden"))}function Ut(t,o="info"){const a=document.getElementById("status-banner");a&&(a.classList.remove("hidden"),a.classList.remove("bg-red-100","bg-yellow-100","bg-blue-100","text-red-800"),o==="error"?a.classList.add("bg-red-100","text-red-800"):o==="warn"?a.classList.add("bg-yellow-100"):a.classList.add("bg-blue-100"),a.textContent=t)}function ma(){const t=document.getElementById("status-banner");t&&(t.classList.add("hidden"),t.textContent="")}function fa(){const t=document.getElementById("location-modal");t&&(t.classList.remove("hidden"),t.classList.add("flex","opacity-100"))}function tt(){const t=document.getElementById("location-modal");t&&(t.classList.remove("flex","opacity-100"),t.classList.add("hidden"))}function ot(t){const o=document.getElementById("location-status");o&&(o.textContent=t)}function ha(t){const o=document.getElementById("location-modal"),a=document.getElementById("location-button"),i=document.getElementById("close-location-modal"),e=document.getElementById("nearby-stations-list");!o||!a||!i||!e||wt||(i.addEventListener("click",()=>{tt()}),o.addEventListener("click",n=>{n.target===o&&tt()}),e.addEventListener("click",n=>{const d=n.target.closest("[data-station-uri]");if(d){const s=d.getAttribute("data-station-uri"),l=d.getAttribute("data-railway-uri");s&&l&&(t(s,l),tt())}}),a.addEventListener("click",async()=>{fa(),ot("現在地を取得中..."),e.innerHTML="";try{const{getCurrentPosition:n,findNearbyStations:u,formatDistance:d}=await Gt(async()=>{const{getCurrentPosition:w,findNearbyStations:p,formatDistance:R}=await import("./location-BThkm30G.js");return{getCurrentPosition:w,findNearbyStations:p,formatDistance:R}},[],import.meta.url),s=await n(),{latitude:l,longitude:c}=s.coords;ot(`現在地: ${l.toFixed(4)}, ${c.toFixed(4)}`);const f=u(l,c,5);if(f.length===0){const w=document.createElement("p");w.className="text-center text-lg",w.textContent="近くに駅が見つかりませんでした",e.appendChild(w);return}f.forEach(w=>{const p=document.createElement("button");p.className="w-full text-left p-4 mb-2 bg-gray-800 hover:bg-gray-700 rounded-lg transition border-2 border-white",p.setAttribute("data-station-uri",w.uri),p.setAttribute("data-railway-uri",w.railway);const R=document.createElement("div");R.className="font-bold text-xl",R.textContent=w.name;const b=document.createElement("div");b.className="text-sm text-gray-300 mt-1",b.textContent=`距離: ${d(w.distance)}`,p.appendChild(R),p.appendChild(b),e.appendChild(p)})}catch(n){const u=n instanceof Error?n:new Error(String(n));console.error("Location error:",u),ot("エラー: "+u.message);const d=document.createElement("p");d.className="text-center text-lg text-red-400",d.textContent="位置情報の取得に失敗しました。ブラウザの設定で位置情報の使用を許可してください。",e.appendChild(d)}}),wt=!0)}let W=null,Bt="https://api-challenge.odpt.org/api/v4/",_t="odpt.Railway:Tokyu.Toyoko",rt="武蔵小杉 (TY11)";const ka=3e5,Ta=3e5,Ea=1e4;function Et(t){W=t}function x(){return W}function B(){return Bt}async function Sa(){try{const t=await fetch("./config.json",{cache:"no-store"});if(!t.ok)return;const o=await t.json();o?.ODPT_API_KEY&&(W=o.ODPT_API_KEY),o?.DEFAULT_RAILWAY&&(_t=o.DEFAULT_RAILWAY),o?.DEFAULT_STATION_NAME&&(rt=o.DEFAULT_STATION_NAME),o?.API_BASE_URL&&(Bt=o.API_BASE_URL)}catch(t){const o=t instanceof Error?t:new Error(String(t));console.warn("Failed to load ./config.json:",o.message)}}async function ga(){await Sa();try{const t=localStorage.getItem(dt);t&&(W=t)}catch{}}let T={railwayUri:null,stationUri:null,stationName:null},at,it;function J(){return T}function K(t){T=t}function Ja(){if(!x()){const i=document.getElementById("departures-inbound"),e=document.getElementById("departures-outbound"),n='<p class="text-center text-red-500 text-2xl pt-8">エラー: config.json に ODPT_API_KEY を設定してください。</p>';return i&&(i.innerHTML=n),e&&(e.innerHTML=n),null}const a=I().find(i=>i.uri===T.stationUri);if(!a||!T.railwayUri){const i=Jt("station-header");return i&&(i.textContent="エラー: 駅または路線が選択されていません"),null}return a}async function z(t){const o=x();if(!o)return!1;let a=[];try{a=await Ht(t,o,B(),T.railwayUri)}catch(d){return console.error("Failed to fetch timetable:",d),Ut("API エラーが発生しました。API キーを確認してください。","error"),Ot(),!1}const e=St(gt(new Date)),n=ct(a,Qt(),e),u=ct(a,to(),e);return await uo(o,B(),n,u),mt("inbound",n,M,Y),mt("outbound",u,M,Y),ca(n,u,M,Y),!0}async function Ia(){const t=x();if(t)try{T.railwayUri&&(await nt(t,B(),T.railwayUri),ma())}catch(o){console.warn("Failed to fetch status:",o),Ut("運行情報取得でエラーが発生しました。API キーを確認してください。","warn")}}function xa(t){typeof at<"u"&&clearInterval(at),typeof it<"u"&&clearInterval(it),at=window.setInterval(async()=>{try{const o=localStorage.getItem(C);o?await z(o):await z(T.stationUri)}catch{T.stationUri&&await z(T.stationUri)}},ka),it=window.setInterval(async()=>{const o=x();if(o)try{const i=localStorage.getItem(L)||T.railwayUri;i&&await nt(o,B(),i)}catch{T.railwayUri&&await nt(o,B(),T.railwayUri)}},Ta),window.setInterval(ht,Ea),ht()}async function j(){try{const a=localStorage.getItem(L),i=localStorage.getItem(C);if(a&&(T.railwayUri=a),i){T.stationUri=i;const n=I().find(u=>u.uri===i);n&&(T.stationName=n.name)}}catch(a){console.warn("Failed to load config from localStorage:",a)}const t=Ja();!t||(da(t.name),sa(),la(oo(),ao()),!await z(t.uri))||(await Ia(),xa(t.uri))}async function F(){try{await ga()}catch(n){const u=n instanceof Error?n:new Error(String(n));console.warn("Error loading local config:",u.message)}if(Vt(),!x()){Tt(x(),n=>{n&&Et(n),F()}),Ot();return}const t=String(x()),o=B();await no(t,o),await eo(t,o);try{const u=(await Pt(t,o)).filter(d=>d["@type"]==="odpt:Railway").map(d=>{const s=U(d["dc:title"]||d["odpt:railwayTitle"]),l=d["odpt:operator"]||"";return{uri:d["owl:sameAs"]||d["@id"]||"",name:s,operator:l}}).filter(d=>d.uri&&d.name).sort((d,s)=>d.name.localeCompare(s.name,"ja"));io(u)}catch(n){const u=n instanceof Error?n:new Error(String(n));console.error("Error fetching railway list:",u.message);const d=Jt("station-header");d&&(d.textContent="エラー: 路線リスト取得失敗")}const a=pa(pt(),_t);let i=J();a&&(i.railwayUri=a.uri,K(i),await $(a.uri,t,o));const e=kt(I(),rt);e&&(i=J(),i.stationUri=e.uri,i.stationName=e.name,K(i)),Tt(x(),n=>{n&&Et(n),F()}),ba(pt(),I(),J().railwayUri,J().stationUri,async n=>{let u=J();u.railwayUri=n,K(u),await $(n,t,o);const d=kt(I(),rt);d&&(u=J(),u.stationUri=d.uri,u.stationName=d.name,K(u)),j()},n=>{const u=I().find(s=>s.uri===n),d=J();d.stationUri=n,d.stationName=u?u.name:null,K(d),j()},async n=>{await $(n,t,o)}),ha(async(n,u)=>{let d=J();d.railwayUri!==u&&(d.railwayUri=u,K(d),localStorage.setItem(L,u),await $(u,t,o));const s=I().find(l=>l.uri===n);d=J(),d.stationUri=n,d.stationName=s?s.name:null,K(d),localStorage.setItem(C,n),j()}),j()}window.initializeBoard=F;window.onload=F;
