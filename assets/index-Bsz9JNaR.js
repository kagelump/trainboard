(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=o(i);fetch(i.href,a)}})();async function y(t,e=3,o=1e3){for(let n=0;n<e;n++)try{const i=await fetch(t);if(!i.ok)throw new Error(`HTTP ${i.status}`);return i}catch(i){if(n===e-1)throw i;await new Promise(a=>setTimeout(a,o*2**n))}throw new Error("Unreachable")}async function yt(t,e,o){const n=new URLSearchParams({"acl:consumerKey":String(t)});o&&n.append("odpt:railway",o);const i=`${e}odpt:Station?${n.toString()}`;return await(await y(i)).json()}async function mt(t,e,o,n){const i=(()=>{const s=new Date().getDay();return s>=1&&s<=5?"odpt.Calendar:Weekday":"odpt.Calendar:SaturdayHoliday"})(),a=new URLSearchParams({"acl:consumerKey":String(e),"odpt:railway":n,"odpt:station":t,"odpt:calendar":i}),r=`${o}odpt:StationTimetable?${a.toString()}`;return await(await y(r)).json()}async function Z(t,e,o){const n=new URLSearchParams({"acl:consumerKey":String(t),"odpt:railway":o}),i=`${e}odpt:TrainInformation?${n.toString()}`;return await(await y(i)).json()}async function Tt(t,e,o){if(t.length===0)return[];const n=new URLSearchParams({"acl:consumerKey":String(e)});n.append("owl:sameAs",t.join(","));const i=`${o}odpt:Station?${n.toString()}`;return await(await y(i)).json()}async function wt(t,e){const o=new URLSearchParams({"acl:consumerKey":String(t)}),n=`${e}odpt:Railway?${o.toString()}`;return await(await y(n)).json()}async function bt(t,e,o){const n=new URLSearchParams({"acl:consumerKey":String(e)});n.append("owl:sameAs",t);const i=`${o}odpt:Railway?${n.toString()}`,r=await(await y(i)).json();return r.length>0?r[0]:null}async function gt(t,e){const o=new URLSearchParams({"acl:consumerKey":String(t)}),n=`${e}odpt:RailDirection?${o.toString()}`;return await(await y(n)).json()}async function ht(t,e){const o=new URLSearchParams({"acl:consumerKey":String(t)}),n=`${e}odpt:TrainType?${o.toString()}`;return await(await y(n)).json()}function g(t){if(!t)return"N/A";if(typeof t=="string")return t;const e=t;return e.ja||e.en||"N/A"}function tt(t){const[e,o]=t.split(":").map(n=>Number(n));return e*60+o}function $(t,e,o,n=5){return(t.find(r=>r["odpt:railDirection"]===e)?.["odpt:stationTimetableObject"]??[]).filter(r=>typeof r["odpt:departureTime"]=="string").filter(r=>tt(r["odpt:departureTime"])>=o).slice(0,n)}function Et(...t){const e=new Set;for(const o of t)for(const n of o??[]){const i=n["odpt:destinationStation"];if(i)if(Array.isArray(i)){for(const a of i)if(a){if(typeof a=="string")e.add(a);else if(typeof a=="object"){const r=a["owl:sameAs"]||a["@id"]||a.id;r&&typeof r=="string"&&e.add(r)}}}else typeof i=="string"&&e.add(i)}return e}function et(t=new Date){return`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function nt(t){return document.getElementById(t)}const it="t2board_railway_uri",ot="t2board_station_uri",O="t2board_api_key",xt=15e3;let P=!1,j=!1,F=!1;function kt(t){document.title=t}function St(t){const e=document.getElementById("station-header");e&&(e.textContent=t||"")}function It(){const t=document.getElementById("departures-inbound"),e=document.getElementById("departures-outbound"),o='<p class="text-center text-2xl pt-8">時刻表を取得中...</p>';t&&(t.innerHTML=o),e&&(e.innerHTML=o)}function Lt(t,e){const o=document.getElementById("direction-inbound-header"),n=document.getElementById("direction-outbound-header");o&&(o.textContent=t),n&&(n.textContent=e)}function H(t,e,o,n){const i=document.getElementById(`departures-${t}`);if(i){if(e.length===0){i.innerHTML='<p class="text-center text-2xl pt-8">本日の発車予定はありません。</p>';return}i.innerHTML=e.map(a=>{const r=a["odpt:departureTime"],l=a["odpt:trainType"]||"";let s="N/A";const c=a["odpt:destinationStation"];if(Array.isArray(c)&&c.length>0){const d=c[0];if(typeof d=="string")s=o.get(d)||d;else if(d&&typeof d=="object"&&(s=d["dc:title"]||d.title||"N/A",(!s||s==="N/A")&&d["owl:sameAs"])){const A=d["owl:sameAs"];typeof A=="string"&&(s=o.get(A)||A)}}else typeof c=="string"&&(s=o.get(c)||c);const T=n[l]||{name:"不明",class:"type-LOC"};return`
        <div class="train-row items-center justify-between">
          <div class="minutes-col text-center" data-departure="${r}">--</div>
          <div class="time-col text-center">${r}</div>
          <div class="flex justify-center items-center">
            <span class="train-type-badge ${T.class}">${T.name}</span>
          </div>
          <div class="destination-text">${s}</div>
        </div>`}).join("")}}let v;function Rt(t){const[e,o]=(t||"").split(":"),n=Number(e||0),i=Number(o||0);return n*3600+i*60}function J(){const t=Array.from(document.querySelectorAll("[data-departure]")),e=new Date,o=e.getHours()*3600+e.getMinutes()*60+e.getSeconds();for(const n of t){const i=n.getAttribute("data-departure")||"",r=Rt(i)-o;if(r<=0)n.textContent="出発";else if(r<=60)n.textContent="到着";else{const l=Math.ceil(r/60);n.textContent=`${l}分`}}}function At(t=xt){J(),typeof v<"u"&&clearInterval(v),v=window.setInterval(J,t)}function Y(){const t=document.getElementById("time-header");t&&(t.textContent=et())}function W(t,e){const o=localStorage.getItem(ot),n=t.find(a=>a.name===e)||t[0];let i=n;if(o){const a=t.find(r=>r.uri===o);a&&(i=a)}else t.length>0&&(i=n||t[0]);return i}function vt(t,e){const o=localStorage.getItem(it),n=t.find(a=>a.uri===e)||t[0];let i=n;if(o){const a=t.find(r=>r.uri===o);a&&(i=a)}else t.length>0&&(i=n||t[0]);return i}function z(t,e,o){const n=document.getElementById("config-modal"),i=document.getElementById("station-select");if(!n||!i)return;function a(r){i.innerHTML=t.map(l=>`<option value="${l.uri}" ${l.uri===r?"selected":""}>${l.name}</option>`).join("")}a(e),j||(document.getElementById("settings-button")?.addEventListener("click",()=>{a(e),Bt()}),document.getElementById("close-modal")?.addEventListener("click",()=>{_()}),document.getElementById("save-settings")?.addEventListener("click",()=>{const c=i.value;localStorage.setItem(ot,c),o(c),_()}),n.addEventListener("click",c=>{c.target===n&&_()}),j=!0)}function _t(t,e,o){const n=document.getElementById("railway-modal"),i=document.getElementById("railway-select");if(!n||!i)return;function a(r){i.innerHTML=t.map(l=>`<option value="${l.uri}" ${l.uri===r?"selected":""}>${l.name}</option>`).join("")}a(e),F||(document.getElementById("railway-button")?.addEventListener("click",()=>{a(e),Ut()}),document.getElementById("close-railway-modal")?.addEventListener("click",()=>{B()}),document.getElementById("save-railway")?.addEventListener("click",()=>{const c=i.value;localStorage.setItem(it,c),o(c),B()}),n.addEventListener("click",c=>{c.target===n&&B()}),F=!0)}function G(t,e){const o=document.getElementById("api-key-modal"),n=document.getElementById("api-key-input");if(!(!o||!n)&&(n.value=t||"",!P)){const i=document.getElementById("save-api-key"),a=document.getElementById("close-api-key");i?.addEventListener("click",()=>{const r=n.value?n.value.trim():null;r?localStorage.setItem(O,r):localStorage.removeItem(O),e(r),U()}),a?.addEventListener("click",()=>U()),o.addEventListener("click",r=>{r.target===o&&U()}),P=!0}}function Bt(){const t=document.getElementById("config-modal");t&&(t.classList.remove("hidden"),t.classList.add("flex","opacity-100"))}function _(){const t=document.getElementById("config-modal");t&&(t.classList.remove("flex","opacity-100"),t.classList.add("hidden"))}function Ut(){const t=document.getElementById("railway-modal");t&&(t.classList.remove("hidden"),t.classList.add("flex","opacity-100"))}function B(){const t=document.getElementById("railway-modal");t&&(t.classList.remove("flex","opacity-100"),t.classList.add("hidden"))}function at(){const t=document.getElementById("api-key-modal");t&&(t.classList.remove("hidden"),t.classList.add("flex","opacity-100"))}function U(){const t=document.getElementById("api-key-modal");t&&(t.classList.remove("flex","opacity-100"),t.classList.add("hidden"))}function rt(t,e="info"){const o=document.getElementById("status-banner");o&&(o.classList.remove("hidden"),o.classList.remove("bg-red-100","bg-yellow-100","bg-blue-100","text-red-800"),e==="error"?o.classList.add("bg-red-100","text-red-800"):e==="warn"?o.classList.add("bg-yellow-100"):o.classList.add("bg-blue-100"),o.textContent=t)}function Nt(){const t=document.getElementById("status-banner");t&&(t.classList.add("hidden"),t.textContent="")}const lt={"odpt.TrainType:Sotetsu.CommuterExpress":{outline:"black",text:"red",fill:"black"},"odpt.TrainType:Sotetsu.CommuterLimitedExpress":{outline:"black",text:"red",fill:"white"},"odpt.TrainType:Sotetsu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Sotetsu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Sotetsu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Sotetsu.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:Odakyu.CommuterExpress":{outline:"black",text:"red",fill:"black"},"odpt.TrainType:Odakyu.CommuterSemiExpress":{outline:"black",text:"yellow",fill:"black"},"odpt.TrainType:Odakyu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Odakyu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Odakyu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Odakyu.RapidExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Odakyu.SemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Keikyu.AccessExpress":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Keikyu.AirportRapidLimitedExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Keikyu.CommuterLimitedExpress":{outline:"black",text:"red",fill:"white"},"odpt.TrainType:Keikyu.EveningWing":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Keikyu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Keikyu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Keikyu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Keikyu.MorningWing":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Keikyu.RapidLimitedExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Keikyu.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:Seibu.CommuterExpress":{outline:"black",text:"red",fill:"black"},"odpt.TrainType:Seibu.CommuterSemiExpress":{outline:"black",text:"yellow",fill:"black"},"odpt.TrainType:Seibu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Seibu.F-Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Seibu.HaijimaLiner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Seibu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Seibu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Seibu.RapidExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Seibu.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:Seibu.S-TRAIN":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Seibu.SemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Tokyu.CommuterLimitedExpress":{outline:"yellow",text:"red",fill:"white"},"odpt.TrainType:Tokyu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Tokyu.F-Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tokyu.LimitedExpress":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tokyu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Tokyu.S-TRAIN":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tokyu.SemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Tobu.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Tobu.F-Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tobu.KawagoeLimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Tobu.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:Tobu.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:Tobu.RapidExpress":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:Tobu.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:Tobu.SL-Taiju":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tobu.SectionExpress":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:Tobu.SectionSemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Tobu.SemiExpress":{outline:"black",text:"black",fill:"gray"},"odpt.TrainType:Tobu.TH-LINER":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:Tobu.TJ-Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:JR-East.ChuoSpecialRapid":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:JR-East.CommuterRapid":{outline:"black",text:"red",fill:"black"},"odpt.TrainType:JR-East.CommuterSpecialRapid":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:JR-East.Express":{outline:"black",text:"white",fill:"red"},"odpt.TrainType:JR-East.LimitedExpress":{outline:"black",text:"black",fill:"red"},"odpt.TrainType:JR-East.Liner":{outline:"yellow",text:"white",fill:"black"},"odpt.TrainType:JR-East.Local":{outline:"black",text:"black",fill:"white"},"odpt.TrainType:JR-East.OmeSpecialRapid":{outline:"black",text:"yellow",fill:"red"},"odpt.TrainType:JR-East.Rapid":{outline:"black",text:"white",fill:"black"},"odpt.TrainType:JR-East.SpecialRapid":{outline:"black",text:"yellow",fill:"red"}};function Ct(){if(document.getElementById("train-type-dynamic-styles"))return;const t=document.createElement("style");t.id="train-type-dynamic-styles";let e="";for(const[o,n]of Object.entries(lt)){const i=st(o);e+=`
.${i} {
  background-color: ${n.fill};
  color: ${n.text};
  border: 2px solid ${n.outline};
}
`}t.textContent=e,document.head.appendChild(t)}function st(t){return"train-type-"+t.replace(/[:.]/g,"-")}function Ot(t){return t in lt?st(t):"type-LOC"}let R=null,ct="https://api-challenge.odpt.org/api/v4/",dt="odpt.Railway:Tokyu.Toyoko",D="武蔵小杉 (TY11)";const Dt=15e4,Mt=3e5,Kt=1e3;function V(t){R=t}function f(){return R}function k(){return ct}async function $t(){try{const t=await fetch("./config.json",{cache:"no-store"});if(!t.ok)return;const e=await t.json();e?.ODPT_API_KEY&&(R=e.ODPT_API_KEY),e?.DEFAULT_RAILWAY&&(dt=e.DEFAULT_RAILWAY),e?.DEFAULT_STATION_NAME&&(D=e.DEFAULT_STATION_NAME),e?.API_BASE_URL&&(ct=e.API_BASE_URL)}catch(t){console.warn("Failed to load ./config.json:",t)}}async function Pt(){await $t();try{const t=localStorage.getItem(O);t&&(R=t)}catch{}}class jt{constructor(e=500,o,n){if(this.maxEntries=e,this.ttlMs=o,this.persistKeyName=n,this.map=new Map,n&&typeof localStorage<"u")try{const i=localStorage.getItem(n);if(i){const a=JSON.parse(i);for(const r of Object.keys(a)){const l=a[r];(!l.expires||l.expires>Date.now())&&this.map.set(r,l)}}}catch(i){console.warn(`Failed to restore cache from localStorage key "${n}":`,i)}}get(e){const o=this.map.get(e);if(o){if(o.expires&&o.expires<=Date.now()){this.map.delete(e);return}return this.map.delete(e),this.map.set(e,o),o.v}}set(e,o){const n=this.ttlMs?Date.now()+this.ttlMs:void 0;for(this.map.has(e)&&this.map.delete(e),this.map.set(e,{v:o,expires:n});this.map.size>this.maxEntries;){const i=this.map.keys().next().value;this.map.delete(i)}this.persistKeyName&&this.persist()}has(e){return typeof this.get(e)<"u"}persist(){if(this.persistKeyName)try{const e={};for(const[o,n]of this.map.entries())e[o]=n;localStorage.setItem(this.persistKeyName,JSON.stringify(e))}catch(e){console.warn(`Failed to persist cache to localStorage key "${this.persistKeyName}":`,e)}}keys(){return Array.from(this.map.keys())}enablePersistence(e){this.persistKeyName=e,this.persist()}}let ut=[],Ft=null,h=null,E=null,M="渋谷・副都心線方面",K="横浜・元町中華街方面";const I={},x=new Map;let pt=[];const b=new jt(500);function Ht(){return h||"odpt.RailDirection:Inbound"}function Jt(){return E||"odpt.RailDirection:Outbound"}function Yt(){return M}function Wt(){return K}function q(){return ut}function zt(t){ut=t}function m(){return pt}async function Gt(t,e){try{const o=await gt(t,e);for(const n of o){const i=n["owl:sameAs"]||n["@id"],a=g(n["dc:title"]);i&&typeof i=="string"&&x.set(i,a)}}catch(o){console.warn("Failed to load direction names:",o)}}async function Vt(t,e){try{const o=await ht(t,e);for(const n of o){const i=n["owl:sameAs"]||n["@id"];if(!i||typeof i!="string")continue;const a=g(n["dc:title"]);if(!a)continue;const r=Ot(i);I[i]={name:a,class:r}}console.log(`Loaded ${Object.keys(I).length} train types`)}catch(o){console.warn("Failed to load train types:",o)}}async function Q(t,e,o){try{const n=await bt(t,e,o);if(!n){console.warn("Railway not found:",t);return}Ft=n,h=n["odpt:ascendingRailDirection"]||"odpt.RailDirection:Inbound",E=n["odpt:descendingRailDirection"]||"odpt.RailDirection:Outbound",h&&x.has(h)&&(M=x.get(h)||M),E&&x.has(E)&&(K=x.get(E)||K);const i=g(n["dc:title"]||n["odpt:railwayTitle"]);kt(`${i} 発車案内板`)}catch(n){console.warn("Failed to load railway metadata:",n)}}async function X(t,e,o){try{pt=(await yt(e,o,t)).map(i=>{const a=g(i["dc:title"]||i["odpt:stationTitle"]),r=i["odpt:stationCode"]||"";return{name:r?`${a} (${r})`:a,uri:i["owl:sameAs"]||""}}).filter(i=>i.uri).sort((i,a)=>i.name.localeCompare(a.name,"ja"))}catch(n){console.error("Error fetching station list:",n)}}async function qt(t,e,...o){const n=Et(...o),i=Array.from(n).filter(a=>!b.has(a));if(i.length!==0)try{const a=await Tt(i,t,e);for(const r of a){const l=r["owl:sameAs"]||r["@id"]||r.id,s=g(r["dc:title"]||r["odpt:stationTitle"]||r.title);l&&typeof l=="string"&&b.set(l,s)}for(const r of i)b.has(r)||b.set(r,r)}catch(a){console.warn("Failed to fetch station names for destinations:",a)}}let u={railwayUri:null,stationUri:null,stationName:null},N,C;function p(){return u}function w(t){u=t}function Qt(){if(!f()){const n=document.getElementById("departures-inbound"),i=document.getElementById("departures-outbound"),a='<p class="text-center text-red-500 text-2xl pt-8">エラー: config.json に ODPT_API_KEY を設定してください。</p>';return n&&(n.innerHTML=a),i&&(i.innerHTML=a),null}const o=m().find(n=>n.uri===u.stationUri);if(!o||!u.railwayUri){const n=nt("station-header");return n&&(n.textContent="エラー: 駅または路線が選択されていません"),null}return o}async function ft(t){const e=f();if(!e)return!1;let o=[];try{o=await mt(t,e,k(),u.railwayUri)}catch(l){return console.error("Failed to fetch timetable:",l),rt("API エラーが発生しました。API キーを確認してください。","error"),at(),!1}const i=tt(et(new Date)),a=$(o,Ht(),i),r=$(o,Jt(),i);return await qt(e,k(),a,r),H("inbound",a,b,I),H("outbound",r,b,I),At(),!0}async function Xt(){const t=f();if(t)try{u.railwayUri&&(await Z(t,k(),u.railwayUri),Nt())}catch(e){console.warn("Failed to fetch status:",e),rt("運行情報取得でエラーが発生しました。API キーを確認してください。","warn")}}function Zt(t){typeof N<"u"&&clearInterval(N),typeof C<"u"&&clearInterval(C),N=window.setInterval(async()=>{await ft(t)},Dt),C=window.setInterval(()=>{const e=f();u.railwayUri&&e&&Z(e,k(),u.railwayUri)},Mt),window.setInterval(Y,Kt),Y()}async function S(){const t=Qt();!t||(St(t.name),It(),Lt(Yt(),Wt()),!await ft(t.uri))||(await Xt(),Zt(t.uri))}async function L(){try{await Pt()}catch(a){console.warn("Error loading local config:",a)}if(Ct(),!f()){G(f(),a=>{a&&V(a),L()}),at();return}const t=String(f()),e=k();await Gt(t,e),await Vt(t,e);try{const r=(await wt(t,e)).filter(l=>l["@type"]==="odpt:Railway").map(l=>{const s=g(l["dc:title"]||l["odpt:railwayTitle"]),c=l["odpt:operator"]||"";return{uri:l["owl:sameAs"]||l["@id"]||"",name:s,operator:c}}).filter(l=>l.uri&&l.name).sort((l,s)=>l.name.localeCompare(s.name,"ja"));zt(r)}catch(a){console.error("Error fetching railway list:",a);const r=nt("station-header");r&&(r.textContent="エラー: 路線リスト取得失敗")}const o=vt(q(),dt);let n=p();o&&(n.railwayUri=o.uri,w(n),await Q(o.uri,t,e)),_t(q(),n.railwayUri,async a=>{let r=p();r.railwayUri=a,w(r),await Q(a,t,e),await X(a,t,e);const l=W(m(),D);l&&(r=p(),r.stationUri=l.uri,r.stationName=l.name,w(r)),z(m(),p().stationUri,s=>{const c=m().find(d=>d.uri===s),T=p();T.stationUri=s,T.stationName=c?c.name:null,w(T),S()}),S()}),n.railwayUri&&await X(n.railwayUri,t,e);const i=W(m(),D);i&&(n=p(),n.stationUri=i.uri,n.stationName=i.name,w(n)),G(f(),a=>{a&&V(a),L()}),z(m(),p().stationUri,a=>{const r=m().find(s=>s.uri===a),l=p();l.stationUri=a,l.stationName=r?r.name:null,w(l),S()}),S()}window.initializeBoard=L;window.onload=L;
